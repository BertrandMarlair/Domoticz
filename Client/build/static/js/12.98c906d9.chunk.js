(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[12],{544:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(25)),c=a.n(r),o=a(62),s=a.n(o),l=a(124);t.a=s()(l.a)((function(e){var t,a=Object.assign({},e),r=a.classes,o=a.children,s=a.center,l=a.className,d=a.color,u=a.bold,b=a.normal,p=a.light,j=a.style,m=a.small,h=c()((t={},Object(i.a)(t,r.defaultFontStyle,!0),Object(i.a)(t,r.title,!0),Object(i.a)(t,l,!0),Object(i.a)(t,r[d],d),Object(i.a)(t,r.center,s),Object(i.a)(t,r.bold,u),Object(i.a)(t,r.normal,b),Object(i.a)(t,r.light,p),Object(i.a)(t,r.smaller,m),t));return Object(n.jsx)("div",{className:h,style:j,children:o})}))},545:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(626)),o=a(636),s=a(505),l=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(s.a)(l)((function(e){var t=e.classes,a=e.onChange,s=e.value,l=e.endAdornment,d=e.placeholder,u=e.disabled,b=e.helperText,p=e.autoComplete,j=e.type,m=e.error,h=e.marginRight,O=e.minWidth,g=e.multiline,f=e.rows,x=e.autoFocus,v=Object(r.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(n.jsx)(c.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:h?40:0,minWidth:O?230:0},children:Object(n.jsx)(o.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},v),InputProps:{endAdornment:l?Object(n.jsx)("div",{className:t.endAdornment,children:l}):null},value:s,onChange:a,placeholder:d,disabled:u,autoComplete:p,type:j,helperText:b,error:m,multiline:g,rows:f,autoFocus:x})})}))},546:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l}));var n=a(5),i=a(4),r=a(7);t.a=function(){return{drawer:{transition:"0.2s",width:"100%",height:"100%"},drawerSmall:{minHeight:"100%"},logo:{height:"100%"},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1},icon:{marginRight:20},header:Object(i.a)({margin:10,padding:10},r.v),profile:{margin:0}}};var c={wrapperModal:{padding:40,minWidth:500},title:{marginBottom:20},description:{marginBottom:30},form:{width:"100%",paddingTop:0},label:{margin:"5px 0"},input:{marginTop:20,marginBottom:10,width:"100%"},formFooter:{marginTop:30}},o=Object(n.a)({root:{margin:"auto",minHeight:"90vh",padding:10},wrapper:{display:"flex"},icon:{marginRight:20},main:{width:"100%",height:"100%",margin:10},navBar:{width:400,height:"100%",margin:10,paddingRight:20},navItem:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,height:60}},"@media (max-width: 1023px)",{navBar:{width:300,margin:5,paddingRight:0},icon:{marginRight:10},navItem:{paddingRight:0,paddingTop:5,paddingBottom:5,height:60}}),s={header:{paddingLeft:16,paddingRight:16,paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"space-between",alignItems:"center"},date:{paddingLeft:5},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1}},l={wrapperBtn:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"stretch",margin:14,"& div":{flexGrow:1,padding:2,"& button":{margin:"0 !important",width:"100%"}}}}},547:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(505)),c=function(){return{root:{width:"100%",display:"flex"},button:{}}},o=a(25),s=a.n(o),l=a(186),d=a(61),u=a(26);t.a=Object(r.a)(c)((function(e){var t,a=e.classes,r=e.className,c=Object(u.g)(),o=s()((t={},Object(i.a)(t,a.button,!0),Object(i.a)(t,r,r),t));return Object(n.jsx)("div",{className:a.root,children:Object(n.jsxs)(l.a,{className:o,color:"transparent",onClick:function(){return c.goBack()},children:[Object(n.jsx)(d.a,{children:"Left"}),"Back"]})})}))},548:function(e,t,a){"use strict";var n=a(1),i=a(151),r=a(5),c=a(0),o=a(505),s=a(63),l=a(536),d=a(550),u=a(25),b=a.n(u),p=function(e){return{paper:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.paper,padding:0,outline:"none",borderRadius:8,height:"100%",display:"flex"},iconButton:{position:"absolute",zIndex:"4",right:"5px",top:"5px"},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"}}},j=a(563),m=a(61);t.a=Object(o.a)(p)((function(e){var t,a=e.classes,o=e.className,u=e.children,p=e.open,h=e.onClose,O=e.fullWidth,g=e.maxWidth,f=b()((t={},Object(r.a)(t,o,o),Object(r.a)(t,a[g],g),t)),x=Object(s.a)(),v=Object(l.a)(x.breakpoints.down("xs"));return Object(c.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(n){a.e(n)}finally{a.f()}}),100)}),[p]),Object(n.jsx)(j.a,{open:p,onClose:h,fullScreen:v||O,className:f,maxWidth:g,disableBackdropClick:!0,children:Object(n.jsxs)("div",{className:a.paper,children:[h&&Object(n.jsx)(d.a,{className:a.iconButton,"aria-label":"Delete",onClick:h,children:Object(n.jsx)(m.a,{size:16,color:x.palette.text.contrasted,children:"Close"})}),u]})})}))},552:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(562)),o=a(7),s=a(101),l=a(505),d=function(e){return{root:{width:"100%"},error:{marginTop:"-6px"},option:{fontFamily:o.x,fontWeight:300,background:e.palette.background.paper,color:e.palette.text.primary,borderRadius:6,minHeight:"35px !important",top:"40%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 10px",cursor:"pointer","&:hover":{background:e.palette.hover.select,borderRadius:0},"&:focus":{background:e.palette.hover.select,borderRadius:0}},description:{fontSize:"0.8rem"}}},u=a(122);t.a=Object(l.a)(d)((function(e){var t=e.classes,a=e.options,l=e.autoFocus,d=e.menuIsOpen,b=e.onChange,p=e.style,j=e.inputValue,m=e.placeholder,h=e.defaultValue,O=e.minWidth,g=e.isMulti,f=e.error,x=e.isDisabled,v=void 0!==x&&x,w=e.isLoading,y=void 0!==w&&w,C=e.isClearable,N=void 0===C||C,T=e.value,S=e.menuMaxHeight,W=Object(r.a)(e,["classes","options","autoFocus","menuIsOpen","onChange","style","inputValue","placeholder","defaultValue","minWidth","isMulti","error","isDisabled","isLoading","isClearable","value","menuMaxHeight"]),R=Object(s.a)(),k=function(e){return Object(i.a)(Object(i.a)({},e),{},{fontFamily:o.x,fontWeight:300,color:R.palette.text.primary,borderRadius:6,maxHeight:"48px !important",minHeight:"48px !important",top:"40%"},p)},A={option:function(e){return Object(i.a)(Object(i.a)({},k(e)),{},{"&:hover":{background:R.palette.hover.select,borderRadius:0},"&:focus":{background:R.palette.hover.select,borderRadius:0}})},control:function(e){return Object(i.a)(Object(i.a)({},k(e)),{},{borderColor:f?"red":"#c4c4c4",overflow:"hidden",maxHeight:"70px !important"})},input:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",overflow:"hidden !important"})},Input:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",overflow:"hidden !important"})},placeholder:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",color:R.palette.input.placeholder})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%"})},noOptionsMessage:function(e){return Object(i.a)({},k(e))},menuList:function(e){return Object(i.a)(Object(i.a)({},e),{},{maxHeight:null!==S&&void 0!==S?S:300})}};return Object(n.jsxs)("div",{className:t.root,style:{minWidth:O?200:0},children:[Object(n.jsx)(c.a,Object(i.a)({order:!0,onChange:b,classNamePrefix:"select",defaultValue:h,placeholder:m,isDisabled:v,isLoading:y,isClearable:N,isSearchable:!0,menuIsOpen:d,name:"color",options:a,styles:A,autoFocus:l,inputValue:j,value:T,isMulti:g,theme:function(e){return Object(i.a)(Object(i.a)({},e),{},{colors:Object(i.a)(Object(i.a)({},e.colors),{},{neutral0:R.palette.background.paper,neutral50:R.palette.text.primary})})},components:{Option:function(e){var a=e.innerProps,r=e.innerRef,c=e.isFocused;return Object(n.jsxs)("div",Object(i.a)(Object(i.a)({ref:r},a),{},{style:{background:c?R.palette.hover.select:"inherit"},className:t.option,children:[Object(n.jsx)("div",{children:e.data.label}),Object(n.jsx)("div",{className:t.description,children:e.data.description})]}))}},className:t.select},W)),f&&Object(n.jsx)("div",{className:t.error,children:Object(n.jsx)(u.a,{errorMessage:f})})]})}))},564:function(e,t,a){"use strict";var n=a(1),i=a(5),r=a(23),c=a(0),o=a(63),s=a(16),l=a(112),d=a.n(l),u=a(25),b=a.n(u),p=a(15),j=a(75),m=a(279);t.a=Object(s.a)((function(e){return{late:{color:e.palette.error.main}}}))((function(e){var t,a=e.classes,s=e.date,l=e.children,u=e.fromNow,h=e.format,O=e.startOf,g=e.endOf,f=e.condition,x=e.refresh,v=e.bold,w=e.small,y=e.margin,C=e.className,N=Object(c.useState)(0),T=Object(r.a)(N,2),S=T[0],W=T[1],R=Object(o.a)(),k=Object(m.a)().t;Object(c.useEffect)((function(){x&&s<p.i&&setTimeout((function(){W(S+1)}),1e4)}),[W,S,x,s]);var A=function(){return!!f||(new Date(d()(l)._d).getTime()<Date.now()||new Date(d()(s)._d).getTime()<Date.now()?R.palette.error.main:new Date(d()(s)._d).getTime()<Date.now()+2*p.h?R.palette.warning.main:R.palette.success.main)},D=b()((t={},Object(i.a)(t,a.date,!0),Object(i.a)(t,a.late,(!0===f||!1===f)&&A()===R.palette.error.main),Object(i.a)(t,a.warning,(!0===f||!1===f)&&A()===R.palette.warning.main),Object(i.a)(t,C,C),t));return Object(n.jsx)("span",{className:D,children:Object(n.jsx)(j.a,{bold:!!v,small:!!w,margin:!!y,className:C,children:l||s?h&&h.length>0?d()(l||s).format(h):O&&O.length>0?d()(l||s).startOf(O).fromNow():g&&g.length>0?d()(l||s).endOf(g).fromNow():u?d()(l||s).fromNow():d()(l||s).format("DD MMM"):k("error.date.invalid")})})}))},643:function(e,t,a){"use strict";a.r(t);var n=a(41),i=a(1),r=a(23),c=a(0),o=a(5),s=a(4),l=a(7),d=function(){var e;return e={root:{maxWidth:l.F,margin:"auto",minHeight:"90vh",padding:10}},Object(o.a)(e,"@media (max-width: ".concat(l.F,"px)"),{container:{width:"100%",margin:"auto"}}),Object(o.a)(e,"@media (max-width: 1023px)",{optionalDisplay:{display:"none"}}),Object(o.a)(e,"table",{textTransform:"capitalize"}),Object(o.a)(e,"tableContainer",{padding:10}),Object(o.a)(e,"card",{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"}),Object(o.a)(e,"description",{marginTop:20,marginBottom:50,flexGrow:1}),Object(o.a)(e,"addCard",Object(s.a)(Object(s.a)({},l.r),{},{margin:10})),Object(o.a)(e,"addCardHeader",Object(s.a)({},l.v)),Object(o.a)(e,"addCardIcon",{marginLeft:20,marginRight:20}),Object(o.a)(e,"addCardTitle",{marginBottom:2}),Object(o.a)(e,"addCardText",{marginBottom:8}),Object(o.a)(e,"editAccountButton",{width:"10%"}),Object(o.a)(e,"option",{display:"flex",flexDirection:"row-reverse"}),e},u=a(42),b=a.n(u),p=a(54),j=a(627),m=a(628),h=a(629),O=a(630),g=a(631),f=a(632),x=a(16),v=a(101),w=a(64),y=a(122),C=a(548),N=a(187),T=a(186),S=a(61),W=a(81),R=a(547),k=a(564),A=a(546),D=function(){return Object(s.a)({},A.e)},I=a(279),B=a(505),M=a(545),F=a(76),H=a(544),L=a(552),_=a(26);function z(){var e=Object(n.a)(["\n    mutation signin($name: String!, $type: TypeEnum!, $password: String!, $passwordConfirmation: String!) {\n        signin(user: {name: $name, type: $type, password: $password, passwordConfirmation: $passwordConfirmation}) {\n            _id\n        }\n    }\n"]);return z=function(){return e},e}var P=Object(B.a)(D)((function(e){var t=e.classes,a=Object(c.useState)(""),n=Object(r.a)(a,2),o=n[0],l=n[1],d=Object(c.useState)(null),u=Object(r.a)(d,2),b=u[0],j=u[1],m=Object(c.useState)(""),h=Object(r.a)(m,2),O=h[0],g=h[1],f=Object(c.useState)(null),x=Object(r.a)(f,2),v=x[0],w=x[1],C=Object(c.useState)(""),N=Object(r.a)(C,2),S=N[0],R=N[1],k=Object(c.useState)(null),A=Object(r.a)(k,2),D=A[0],B=A[1],z=Object(c.useState)(""),P=Object(r.a)(z,2),$=P[0],E=P[1],G=Object(c.useState)(null),U=Object(r.a)(G,2),q=U[0],J=U[1],K=Object(_.g)(),Q=Object(I.a)().t,X=Object(p.b)(V),Y=Object(r.a)(X,2),Z=Y[0],ee=Y[1],te=ee.data,ae=ee.error,ne=ee.loading;Object(c.useEffect)((function(){var e;(null===te||void 0===te||null===(e=te.signin)||void 0===e?void 0:e._id)&&(Object(F.a)("Success",{variant:"success"}),K.push("/admin/account/".concat(te.signin._id)))}),[te,K,Q]);return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsx)(H.a,{normal:!0,centered:!0,children:"Creation d'un compte"})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;if(o.length<2?(j("Le titre est trop court"),t=!1):j(""),O?w(""):(w("connect.register.errors.invalidType"),t=!1),S.length<5?(B("connect.register.errors.invalidPassword"),t=!1):B(""),$.length<5?(J("connect.register.errors.invalidConfirmPasswordShort"),t=!1):J(""),$!==S?(J("connect.register.errors.invalidConfirmPassword"),t=!1):J(""),t){var a={name:o,type:O,password:S,passwordConfirmation:$};Z({variables:Object(s.a)({},a)})}}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(W.a,{color:"label",className:t.label,children:"Nom"}),Object(i.jsx)(M.a,{autoFocus:!0,value:o,onChange:function(e){return l(e.target.value)},placeholder:"Entrez un nom",type:"text",helperText:Q(b),error:!!b})]}),Object(i.jsx)("div",{className:t.input,children:Object(i.jsxs)("div",{className:t.inputType,children:[Object(i.jsx)(W.a,{color:"label",className:t.label,children:Q("connect.signin.typeInputTitle")}),Object(i.jsx)(L.a,{placeholder:"S\xe9lectionner un type",options:[{value:"user",label:"User"},{value:"device",label:"Device"}],error:!!v,isClearable:!1,onChange:function(e){return g(e.value)},isSearchable:!1,inputValue:""})]})}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(W.a,{color:"label",className:t.label,children:Q("connect.signin.passwordInputTitle")}),Object(i.jsx)(M.a,{value:S,onChange:function(e){return R(e.target.value)},placeholder:"Votre mot de passe",type:"password",helperText:Q(D),error:!!D})]}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(W.a,{color:"label",className:t.label,children:Q("connect.signin.confirmPasswordInputTitle")}),Object(i.jsx)(M.a,{value:$,onChange:function(e){return E(e.target.value)},placeholder:Q("connect.signin.confirmPasswordInputLabel"),type:"password",helperText:Q(q),error:!!q})]}),Object(i.jsx)(y.a,{errorMessage:ae}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(T.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:ne,children:"Cr\xe9er le compte"})})]})]})})),V=b()(z());function $(){var e=Object(n.a)(["\n    query getAllusers {\n        getAllUsers {\n            _id\n            name\n            type\n            active\n            permission\n            basic {\n                verified\n                lastLogin\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return $=function(){return e},e}t.default=Object(x.a)(d)((function(e){var t=e.classes,a=Object(c.useState)(!1),n=Object(r.a)(a,2),o=n[0],s=n[1],l=Object(c.useState)([]),d=Object(r.a)(l,2),u=d[0],b=d[1],x=Object(c.useState)(!1),A=Object(r.a)(x,2),D=A[0],I=A[1],B=Object(v.a)(),M=Object(_.g)(),F=Object(p.c)(E),H=F.data,L=F.loading,z=F.error,V=function(){I(!1)},$=function(e){return!0===e?"Checked":"Close"},G=function(e){return!0===e?B.palette.primary.main:B.palette.text.default},U=function(e){if(null!=e&&""!==e)return Object(i.jsx)(k.a,{bold:!0,children:e})};return Object(c.useEffect)((function(){L||!1!==o||s(!0)}),[L,o]),Object(c.useEffect)((function(){(null===H||void 0===H?void 0:H.getAllUsers)&&b(H.getAllUsers)}),[H]),Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsx)(R.a,{}),Object(i.jsxs)(N.a,{className:t.addCard,children:[Object(i.jsxs)("div",{className:t.addCardHeader,children:[Object(i.jsx)(S.a,{color:B.palette.primary.main,className:t.addCardIcon,children:"Account"}),Object(i.jsx)(W.a,{className:t.addCardTitle,children:"Gestion des utilisateurs"})]}),Object(i.jsx)(T.a,{round:!0,size:"sm",onClick:function(){return I(!0)},children:"Add new account"})]}),Object(i.jsx)(j.a,{className:t.tableContainer,children:Object(i.jsxs)(m.a,{className:t.table,"aria-label":"simple table",children:[Object(i.jsx)(h.a,{className:t.tableHead,children:Object(i.jsxs)(O.a,{children:[Object(i.jsx)(g.a,{align:"center",children:"Nom"}),Object(i.jsx)(g.a,{align:"center",children:"Type"}),Object(i.jsx)(g.a,{align:"center",children:"Permission"}),Object(i.jsx)(g.a,{align:"center",children:"Actif"}),Object(i.jsx)(g.a,{align:"center",children:"V\xe9rifi\xe9"}),Object(i.jsx)(g.a,{className:t.optionalDisplay,align:"center",children:"Cr\xe9ation"}),Object(i.jsx)(g.a,{className:t.optionalDisplay,align:"center",children:"Derni\xe8re activit\xe9"}),Object(i.jsx)(g.a,{align:"center",children:"Actions"})]})}),Object(i.jsxs)(f.a,{children:[Object(i.jsx)(y.a,{errorMessage:z}),u.map((function(e){return Object(i.jsxs)(O.a,{children:[Object(i.jsx)(g.a,{align:"center",component:"th",scope:"row",children:e.name}),Object(i.jsx)(g.a,{align:"center",children:e.type}),Object(i.jsx)(g.a,{align:"center",children:e.permission}),Object(i.jsx)(g.a,{align:"center",children:Object(i.jsx)(S.a,{color:G(e.active),className:t.addAccountIcon,children:$(e.active)})}),Object(i.jsx)(g.a,{align:"center",children:Object(i.jsx)(S.a,{color:G(e.basic.verified),className:t.addAccountIcon,children:$(e.basic.verified)})}),Object(i.jsx)(g.a,{className:t.optionalDisplay,align:"center",children:U(e.createdAt)}),Object(i.jsx)(g.a,{className:t.optionalDisplay,align:"center",children:U(e.basic.lastLogin)}),Object(i.jsx)(g.a,{align:"center",className:t.editAccountButton,children:Object(i.jsx)(T.a,{round:!0,size:"sm",onClick:function(){return function(e){"user"===e.type?M.push("/admin/user/".concat(e._id)):"device"===e.type&&M.push("/admin/device/".concat(e._id))}(e)},children:"Manage"})})]},e._id)}))]})]})}),L&&Object(i.jsx)(w.a,{absolute:!0}),Object(i.jsx)(C.a,{open:D,onClose:function(){return V()},children:Object(i.jsx)(P,{onClose:function(){return V()}})})]})}));var E=b()($())}}]);