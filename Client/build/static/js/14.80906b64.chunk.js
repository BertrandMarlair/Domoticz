(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[14],{545:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(26)),c=a.n(r),o=a(62),s=a.n(o),l=a(124);t.a=s()(l.a)((function(e){var t,a=Object.assign({},e),r=a.classes,o=a.children,s=a.center,l=a.className,d=a.color,u=a.bold,p=a.normal,b=a.light,j=a.style,m=a.small,h=c()((t={},Object(i.a)(t,r.defaultFontStyle,!0),Object(i.a)(t,r.title,!0),Object(i.a)(t,l,!0),Object(i.a)(t,r[d],d),Object(i.a)(t,r.center,s),Object(i.a)(t,r.bold,u),Object(i.a)(t,r.normal,p),Object(i.a)(t,r.light,b),Object(i.a)(t,r.smaller,m),t));return Object(n.jsx)("div",{className:h,style:j,children:o})}))},546:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(630)),o=a(640),s=a(506),l=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(s.a)(l)((function(e){var t=e.classes,a=e.onChange,s=e.value,l=e.endAdornment,d=e.placeholder,u=e.disabled,p=e.helperText,b=e.autoComplete,j=e.type,m=e.error,h=e.marginRight,g=e.minWidth,O=e.multiline,f=e.rows,x=e.autoFocus,v=Object(r.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(n.jsx)(c.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:h?40:0,minWidth:g?230:0},children:Object(n.jsx)(o.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},v),InputProps:{endAdornment:l?Object(n.jsx)("div",{className:t.endAdornment,children:l}):null},value:s,onChange:a,placeholder:d,disabled:u,autoComplete:b,type:j,helperText:p,error:m,multiline:O,rows:f,autoFocus:x})})}))},547:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l}));var n=a(5),i=a(4),r=a(7);t.a=function(){return{drawer:{transition:"0.2s",width:"100%",height:"100%"},drawerSmall:{minHeight:"100%"},logo:{height:"100%"},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1},icon:{marginRight:20},header:Object(i.a)({margin:10,padding:10},r.q),profile:{margin:0}}};var c={wrapperModal:{padding:40,minWidth:500},title:{marginBottom:20},description:{marginBottom:30},form:{width:"100%",paddingTop:0},label:{margin:"5px 0"},input:{marginTop:20,marginBottom:10,width:"100%"},formFooter:{marginTop:30}},o=Object(n.a)({root:{margin:"auto",minHeight:"90vh",padding:10},wrapper:{display:"flex"},icon:{marginRight:20},main:{width:"100%",height:"100%",margin:10},navBar:{width:400,height:"100%",margin:10,paddingRight:20},navItem:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,height:60}},"@media (max-width: 1023px)",{navBar:{width:300,margin:5,paddingRight:0},icon:{marginRight:10},navItem:{paddingRight:0,paddingTop:5,paddingBottom:5,height:60}}),s={header:{paddingLeft:16,paddingRight:16,paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"space-between",alignItems:"center"},date:{paddingLeft:5},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1}},l={wrapperBtn:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"stretch",margin:14,"& div":{flexGrow:1,padding:2,"& button":{margin:"0 !important",width:"100%"}}}}},548:function(e,t,a){"use strict";var n=a(1),i=a(101),r=a(5),c=a(0),o=a(506),s=a(65),l=a(537),d=a(550),u=a(26),p=a.n(u),b=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.default,padding:0,outline:"none",borderRadius:10,display:"flex"},header:{padding:15,display:"flex",alignItems:"center",background:e.palette.background.paper},body:{padding:15},iconButton:{marginLeft:10},headerTitle:{marginLeft:30,marginRight:80},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"},backDrop:{backdropFilter:"blur(8px)"}}},j=a(567),m=a(61),h=a(545);t.a=Object(o.a)(b)((function(e){var t,a=e.classes,o=e.className,u=e.children,b=e.open,g=e.onClose,O=e.fullWidth,f=e.maxWidth,x=e.title,v=p()((t={},Object(r.a)(t,o,o),Object(r.a)(t,a[f],f),t)),w=Object(s.a)(),y=Object(l.a)(w.breakpoints.down("xs"));return Object(c.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(n){a.e(n)}finally{a.f()}}),100)}),[b]),Object(n.jsx)(j.a,{open:b,onClose:g,fullScreen:y||O,className:v,maxWidth:f,PaperProps:{classes:{root:a.root}},BackdropProps:{classes:{root:a.backDrop}},children:Object(n.jsxs)("div",{className:a.paper,children:[g&&Object(n.jsxs)("div",{className:a.header,children:[Object(n.jsx)(d.a,{className:a.iconButton,"aria-label":"Delete",onClick:g,children:Object(n.jsx)(m.a,{size:18,color:w.palette.text.contrasted,children:"Close"})}),x&&Object(n.jsx)(h.a,{normal:!0,className:a.headerTitle,children:x})]}),Object(n.jsx)("div",{className:a.body,children:u})]})})}))},552:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(560)),o=a(7),s=a(100),l=a(506),d=function(e){return{root:{width:"100%"},error:{marginTop:"-6px"},option:{fontFamily:o.s,fontWeight:300,background:e.palette.background.paper,color:e.palette.text.primary,borderRadius:6,minHeight:"35px !important",top:"40%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 10px",cursor:"pointer","&:hover":{background:e.palette.hover.select,borderRadius:0},"&:focus":{background:e.palette.hover.select,borderRadius:0}},description:{fontSize:"0.8rem"}}},u=a(122);t.a=Object(l.a)(d)((function(e){var t=e.classes,a=e.options,l=e.autoFocus,d=e.menuIsOpen,p=e.onChange,b=e.style,j=e.inputValue,m=e.placeholder,h=e.defaultValue,g=e.minWidth,O=e.isMulti,f=e.error,x=e.isDisabled,v=void 0!==x&&x,w=e.isLoading,y=void 0!==w&&w,N=e.isClearable,C=void 0===N||N,T=e.value,S=e.menuMaxHeight,k=Object(r.a)(e,["classes","options","autoFocus","menuIsOpen","onChange","style","inputValue","placeholder","defaultValue","minWidth","isMulti","error","isDisabled","isLoading","isClearable","value","menuMaxHeight"]),R=Object(s.a)(),W=function(e){return Object(i.a)(Object(i.a)({},e),{},{fontFamily:o.s,fontWeight:300,color:R.palette.text.primary,borderRadius:6,maxHeight:"48px !important",minHeight:"48px !important",top:"40%"},b)},D={option:function(e){return Object(i.a)(Object(i.a)({},W(e)),{},{"&:hover":{background:R.palette.hover.select,borderRadius:0},"&:focus":{background:R.palette.hover.select,borderRadius:0}})},control:function(e){return Object(i.a)(Object(i.a)({},W(e)),{},{borderColor:f?"red":"#c4c4c4",overflow:"hidden",maxHeight:"70px !important",background:"inherit"})},input:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",overflow:"hidden !important"})},Input:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",overflow:"hidden !important"})},placeholder:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%",color:R.palette.input.placeholder})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{top:"40%"})},noOptionsMessage:function(e){return Object(i.a)({},W(e))},menuList:function(e){return Object(i.a)(Object(i.a)({},e),{},{maxHeight:null!==S&&void 0!==S?S:300})}};return Object(n.jsxs)("div",{className:t.root,style:{minWidth:g?200:0},children:[Object(n.jsx)(c.a,Object(i.a)({order:!0,onChange:p,classNamePrefix:"select",defaultValue:h,placeholder:m,isDisabled:v,isLoading:y,isClearable:C,isSearchable:!0,menuIsOpen:d,name:"color",options:a,styles:D,autoFocus:l,inputValue:j,value:T,isMulti:O,theme:function(e){return Object(i.a)(Object(i.a)({},e),{},{colors:Object(i.a)(Object(i.a)({},e.colors),{},{neutral0:R.palette.background.paper,neutral50:R.palette.text.primary})})},components:{Option:function(e){var a=e.innerProps,r=e.innerRef,c=e.isFocused;return Object(n.jsxs)("div",Object(i.a)(Object(i.a)({ref:r},a),{},{style:{background:c?R.palette.hover.select:"inherit"},className:t.option,children:[Object(n.jsx)("div",{children:e.data.label}),Object(n.jsx)("div",{className:t.description,children:e.data.description})]}))}},className:t.select},k)),f&&Object(n.jsx)("div",{className:t.error,children:Object(n.jsx)(u.a,{errorMessage:f})})]})}))},561:function(e,t,a){"use strict";var n=a(1),i=a(5),r=a(20),c=a(0),o=a(65),s=a(17),l=a(104),d=a.n(l),u=a(26),p=a.n(u),b=a(15),j=a(75),m=a(280);t.a=Object(s.a)((function(e){return{late:{color:e.palette.error.main}}}))((function(e){var t,a=e.classes,s=e.date,l=e.children,u=e.fromNow,h=e.format,g=e.startOf,O=e.endOf,f=e.condition,x=e.refresh,v=e.bold,w=e.small,y=e.margin,N=e.className,C=Object(c.useState)(0),T=Object(r.a)(C,2),S=T[0],k=T[1],R=Object(o.a)(),W=Object(m.a)().t;Object(c.useEffect)((function(){x&&s<b.i&&setTimeout((function(){k(S+1)}),1e4)}),[k,S,x,s]);var D=function(){return!!f||(new Date(d()(l)._d).getTime()<Date.now()||new Date(d()(s)._d).getTime()<Date.now()?R.palette.error.main:new Date(d()(s)._d).getTime()<Date.now()+2*b.h?R.palette.warning.main:R.palette.success.main)},A=p()((t={},Object(i.a)(t,a.date,!0),Object(i.a)(t,a.late,(!0===f||!1===f)&&D()===R.palette.error.main),Object(i.a)(t,a.warning,(!0===f||!1===f)&&D()===R.palette.warning.main),Object(i.a)(t,N,N),t));return Object(n.jsx)("span",{className:A,children:Object(n.jsx)(j.a,{bold:!!v,small:!!w,margin:!!y,className:N,children:l||s?h&&h.length>0?d()(l||s).format(h):g&&g.length>0?d()(l||s).startOf(g).fromNow():O&&O.length>0?d()(l||s).endOf(O).fromNow():u?d()(l||s).fromNow():d()(l||s).format("DD MMM"):W("error.date.invalid")})})}))},645:function(e,t,a){"use strict";a.r(t);var n=a(41),i=a(1),r=a(20),c=a(0),o=a(5),s=a(4),l=a(7),d=function(){var e;return e={root:{maxWidth:l.y,margin:"auto",minHeight:"90vh",padding:10}},Object(o.a)(e,"@media (max-width: ".concat(l.y,"px)"),{container:{width:"100%",margin:"auto"}}),Object(o.a)(e,"@media (max-width: 1023px)",{optionalDisplay:{display:"none"}}),Object(o.a)(e,"table",{textTransform:"capitalize"}),Object(o.a)(e,"tableContainer",{padding:10}),Object(o.a)(e,"card",{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"}),Object(o.a)(e,"description",{marginTop:20,marginBottom:50,flexGrow:1}),Object(o.a)(e,"addCard",Object(s.a)(Object(s.a)({},l.m),{},{marginBottom:30})),Object(o.a)(e,"addCardHeader",Object(s.a)({},l.q)),Object(o.a)(e,"addCardIcon",{marginLeft:20,marginRight:20}),Object(o.a)(e,"addCardTitle",{marginBottom:2}),Object(o.a)(e,"addCardText",{marginBottom:8}),Object(o.a)(e,"editAccountButton",{width:"10%"}),Object(o.a)(e,"option",{display:"flex",flexDirection:"row-reverse"}),e},u=a(42),p=a.n(u),b=a(53),j=a(631),m=a(632),h=a(633),g=a(634),O=a(635),f=a(636),x=a(17),v=a(100),w=a(63),y=a(122),N=a(548),C=a(187),T=a(186),S=a(61),k=a(81),R=a(561),W=a(547),D=function(){return Object(s.a)({},W.e)},A=a(280),I=a(506),B=a(546),M=a(76),F=a(545),H=a(552),L=a(27);function P(){var e=Object(n.a)(["\n    mutation signin($name: String!, $type: TypeEnum!, $password: String!, $passwordConfirmation: String!) {\n        signin(user: {name: $name, type: $type, password: $password, passwordConfirmation: $passwordConfirmation}) {\n            _id\n        }\n    }\n"]);return P=function(){return e},e}var _=Object(I.a)(D)((function(e){var t=e.classes,a=Object(c.useState)(""),n=Object(r.a)(a,2),o=n[0],l=n[1],d=Object(c.useState)(null),u=Object(r.a)(d,2),p=u[0],j=u[1],m=Object(c.useState)(""),h=Object(r.a)(m,2),g=h[0],O=h[1],f=Object(c.useState)(null),x=Object(r.a)(f,2),v=x[0],w=x[1],N=Object(c.useState)(""),C=Object(r.a)(N,2),S=C[0],R=C[1],W=Object(c.useState)(null),D=Object(r.a)(W,2),I=D[0],P=D[1],_=Object(c.useState)(""),z=Object(r.a)(_,2),$=z[0],E=z[1],G=Object(c.useState)(null),q=Object(r.a)(G,2),U=q[0],J=q[1],K=Object(L.g)(),Q=Object(A.a)().t,X=Object(b.b)(V),Y=Object(r.a)(X,2),Z=Y[0],ee=Y[1],te=ee.data,ae=ee.error,ne=ee.loading;Object(c.useEffect)((function(){var e;(null===te||void 0===te||null===(e=te.signin)||void 0===e?void 0:e._id)&&(Object(M.a)("Success",{variant:"success"}),K.push("/admin/account/".concat(te.signin._id)))}),[te,K,Q]);return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsx)(F.a,{normal:!0,centered:!0,children:"Creation d'un compte"})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;if(o.length<2?(j("Le titre est trop court"),t=!1):j(""),g?w(""):(w("connect.register.errors.invalidType"),t=!1),S.length<5?(P("connect.register.errors.invalidPassword"),t=!1):P(""),$.length<5?(J("connect.register.errors.invalidConfirmPasswordShort"),t=!1):J(""),$!==S?(J("connect.register.errors.invalidConfirmPassword"),t=!1):J(""),t){var a={name:o,type:g,password:S,passwordConfirmation:$};Z({variables:Object(s.a)({},a)})}}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(k.a,{color:"label",className:t.label,children:"Nom"}),Object(i.jsx)(B.a,{autoFocus:!0,value:o,onChange:function(e){return l(e.target.value)},placeholder:"Entrez un nom",type:"text",helperText:Q(p),error:!!p})]}),Object(i.jsx)("div",{className:t.input,children:Object(i.jsxs)("div",{className:t.inputType,children:[Object(i.jsx)(k.a,{color:"label",className:t.label,children:Q("connect.signin.typeInputTitle")}),Object(i.jsx)(H.a,{placeholder:"S\xe9lectionner un type",options:[{value:"user",label:"User"},{value:"device",label:"Device"}],error:!!v,isClearable:!1,onChange:function(e){return O(e.value)},isSearchable:!1,inputValue:""})]})}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(k.a,{color:"label",className:t.label,children:Q("connect.signin.passwordInputTitle")}),Object(i.jsx)(B.a,{value:S,onChange:function(e){return R(e.target.value)},placeholder:"Votre mot de passe",type:"password",helperText:Q(I),error:!!I})]}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(k.a,{color:"label",className:t.label,children:Q("connect.signin.confirmPasswordInputTitle")}),Object(i.jsx)(B.a,{value:$,onChange:function(e){return E(e.target.value)},placeholder:Q("connect.signin.confirmPasswordInputLabel"),type:"password",helperText:Q(U),error:!!U})]}),Object(i.jsx)(y.a,{errorMessage:ae}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(T.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:ne,children:"Cr\xe9er le compte"})})]})]})})),V=p()(P());function z(){var e=Object(n.a)(["\n    query getAllusers {\n        getAllUsers {\n            _id\n            name\n            type\n            active\n            permission\n            basic {\n                verified\n                lastLogin\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return z=function(){return e},e}t.default=Object(x.a)(d)((function(e){var t=e.classes,a=Object(c.useState)(!1),n=Object(r.a)(a,2),o=n[0],s=n[1],l=Object(c.useState)([]),d=Object(r.a)(l,2),u=d[0],p=d[1],x=Object(c.useState)(!1),W=Object(r.a)(x,2),D=W[0],A=W[1],I=Object(v.a)(),B=Object(L.g)(),M=Object(b.c)($),F=M.data,H=M.loading,P=M.error,V=function(){A(!1)},z=function(e){return!0===e?"Checked":"Close"},E=function(e){return!0===e?I.palette.primary.main:I.palette.text.default},G=function(e){if(null!=e&&""!==e)return Object(i.jsx)(R.a,{bold:!0,children:e})};return Object(c.useEffect)((function(){H||!1!==o||s(!0)}),[H,o]),Object(c.useEffect)((function(){(null===F||void 0===F?void 0:F.getAllUsers)&&p(F.getAllUsers)}),[F]),Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsxs)(C.a,{className:t.addCard,children:[Object(i.jsxs)("div",{className:t.addCardHeader,children:[Object(i.jsx)(S.a,{color:I.palette.primary.main,className:t.addCardIcon,children:"Account"}),Object(i.jsx)(k.a,{className:t.addCardTitle,children:"Gestion des utilisateurs"})]}),Object(i.jsx)(T.a,{round:!0,size:"sm",onClick:function(){return A(!0)},children:"Add new account"})]}),Object(i.jsx)(C.a,{noPadding:!0,children:Object(i.jsx)(j.a,{className:t.tableContainer,children:Object(i.jsxs)(m.a,{className:t.table,"aria-label":"simple table",children:[Object(i.jsx)(h.a,{className:t.tableHead,children:Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{align:"center",children:"Nom"}),Object(i.jsx)(O.a,{align:"center",children:"Type"}),Object(i.jsx)(O.a,{align:"center",children:"Permission"}),Object(i.jsx)(O.a,{align:"center",children:"Actif"}),Object(i.jsx)(O.a,{align:"center",children:"V\xe9rifi\xe9"}),Object(i.jsx)(O.a,{className:t.optionalDisplay,align:"center",children:"Cr\xe9ation"}),Object(i.jsx)(O.a,{className:t.optionalDisplay,align:"center",children:"Derni\xe8re activit\xe9"}),Object(i.jsx)(O.a,{align:"center",children:"Actions"})]})}),Object(i.jsxs)(f.a,{children:[Object(i.jsx)(y.a,{errorMessage:P}),u.map((function(e){return Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{align:"center",component:"th",scope:"row",children:e.name}),Object(i.jsx)(O.a,{align:"center",children:e.type}),Object(i.jsx)(O.a,{align:"center",children:e.permission}),Object(i.jsx)(O.a,{align:"center",children:Object(i.jsx)(S.a,{color:E(e.active),className:t.addAccountIcon,children:z(e.active)})}),Object(i.jsx)(O.a,{align:"center",children:Object(i.jsx)(S.a,{color:E(e.basic.verified),className:t.addAccountIcon,children:z(e.basic.verified)})}),Object(i.jsx)(O.a,{className:t.optionalDisplay,align:"center",children:G(e.createdAt)}),Object(i.jsx)(O.a,{className:t.optionalDisplay,align:"center",children:G(e.basic.lastLogin)}),Object(i.jsx)(O.a,{align:"center",className:t.editAccountButton,children:Object(i.jsx)(T.a,{round:!0,size:"sm",onClick:function(){return function(e){"user"===e.type?B.push("/admin/user/".concat(e._id)):"device"===e.type&&B.push("/admin/device/".concat(e._id))}(e)},children:"Manage"})})]},e._id)}))]})]})})}),H&&Object(i.jsx)(w.a,{absolute:!0}),Object(i.jsx)(N.a,{open:D,onClose:function(){return V()},children:Object(i.jsx)(_,{onClose:function(){return V()}})})]})}));var $=p()(z())}}]);