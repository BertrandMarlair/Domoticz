(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[15],{544:function(e,t,n){"use strict";var a=n(1),i=n(5),r=(n(0),n(25)),c=n.n(r),s=n(62),l=n.n(s),o=n(124);t.a=l()(o.a)((function(e){var t,n=Object.assign({},e),r=n.classes,s=n.children,l=n.center,o=n.className,d=n.color,u=n.bold,j=n.normal,b=n.light,p=n.style,h=n.small,m=c()((t={},Object(i.a)(t,r.defaultFontStyle,!0),Object(i.a)(t,r.title,!0),Object(i.a)(t,o,!0),Object(i.a)(t,r[d],d),Object(i.a)(t,r.center,l),Object(i.a)(t,r.bold,u),Object(i.a)(t,r.normal,j),Object(i.a)(t,r.light,b),Object(i.a)(t,r.smaller,h),t));return Object(a.jsx)("div",{className:m,style:p,children:s})}))},545:function(e,t,n){"use strict";var a=n(1),i=n(4),r=n(82),c=(n(0),n(628)),s=n(638),l=n(505),o=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(l.a)(o)((function(e){var t=e.classes,n=e.onChange,l=e.value,o=e.endAdornment,d=e.placeholder,u=e.disabled,j=e.helperText,b=e.autoComplete,p=e.type,h=e.error,m=e.marginRight,v=e.minWidth,O=e.multiline,g=e.rows,x=e.autoFocus,f=Object(r.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(a.jsx)(c.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:m?40:0,minWidth:v?230:0},children:Object(a.jsx)(s.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},f),InputProps:{endAdornment:o?Object(a.jsx)("div",{className:t.endAdornment,children:o}):null},value:l,onChange:n,placeholder:d,disabled:u,autoComplete:b,type:p,helperText:j,error:h,multiline:O,rows:g,autoFocus:x})})}))},547:function(e,t,n){"use strict";var a=n(1),i=n(5),r=(n(0),n(505)),c=function(){return{root:{width:"100%",display:"flex"},button:{}}},s=n(25),l=n.n(s),o=n(186),d=n(61),u=n(26);t.a=Object(r.a)(c)((function(e){var t,n=e.classes,r=e.className,c=Object(u.g)(),s=l()((t={},Object(i.a)(t,n.button,!0),Object(i.a)(t,r,r),t));return Object(a.jsx)("div",{className:n.root,children:Object(a.jsxs)(o.a,{className:s,color:"transparent",onClick:function(){return c.goBack()},children:[Object(a.jsx)(d.a,{children:"Left"}),"Back"]})})}))},548:function(e,t,n){"use strict";var a=n(1),i=n(151),r=n(5),c=n(0),s=n(505),l=n(63),o=n(536),d=n(550),u=n(25),j=n.n(u),b=function(e){return{paper:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.paper,padding:0,outline:"none",borderRadius:8,height:"100%",display:"flex"},iconButton:{position:"absolute",zIndex:"4",right:"5px",top:"5px"},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"}}},p=n(564),h=n(61);t.a=Object(s.a)(b)((function(e){var t,n=e.classes,s=e.className,u=e.children,b=e.open,m=e.onClose,v=e.fullWidth,O=e.maxWidth,g=j()((t={},Object(r.a)(t,s,s),Object(r.a)(t,n[O],O),t)),x=Object(l.a)(),f=Object(o.a)(x.breakpoints.down("xs"));return Object(c.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),n=Object(i.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.removeAttribute("tabindex")}}catch(a){n.e(a)}finally{n.f()}}),100)}),[b]),Object(a.jsx)(p.a,{open:b,onClose:m,fullScreen:f||v,className:g,maxWidth:O,disableBackdropClick:!0,children:Object(a.jsxs)("div",{className:n.paper,children:[m&&Object(a.jsx)(d.a,{className:n.iconButton,"aria-label":"Delete",onClick:m,children:Object(a.jsx)(h.a,{size:16,color:x.palette.text.contrasted,children:"Close"})}),u]})})}))},640:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(23),r=n(0),c=n(63),s=n(550),l=n(16),o=n(4),d=n(7),u=function(){return{root:{maxWidth:d.E,margin:"auto",padding:40},card:{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"},description:{marginTop:20,marginBottom:50,flexGrow:1},addProvider:Object(o.a)({},d.r),addProviderHeader:Object(o.a)({},d.v),addProviderIcon:{margin:20},addProviderTitle:{marginBottom:2},addProviderText:{marginBottom:8},addBridge:{width:"fit-content",margin:"auto"},addBridgeDescription:{marginTop:30},bridgeImage:{width:200,display:"block",margin:"50px auto"},addBridgeicon:{display:"block",margin:"auto"}}},j=n(187),b=n(61),p=n(75),h=n(151),m=function(e){return{modalWrapper:{padding:30},modalButtonWrapper:Object(o.a)({},d.u),iconWrapper:Object(o.a)(Object(o.a)({},d.t),{},{marginTop:50}),closeButtonWrapper:{marginTop:"50px !important"},stepContent:{margin:20},stepTitle:{marginBottom:20},stepDescription:{marginBottom:10},buttonWrapper:{display:"flex",alignItems:"center"},bridgeImage:{width:200,display:"block",margin:"50px auto"},addBridgeicon:{display:"block",margin:"auto"},errorMessage:{textAlign:"center",fontSize:16},device:Object(o.a)(Object(o.a)({},d.r),{},{padding:"0 20px",minHeight:90,cursor:"pointer","&:hover":{background:e.palette.background.light}}),deviceHeader:Object(o.a)(Object(o.a)({},d.v),{},{width:"100%"}),deviceIcon:{margin:20},deviceTitle:{marginBottom:2},deviceText:{marginBottom:8},deviceEnd:{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:1},title:{margin:"30px 16px",fontSize:"1.4rem"}}},v=n(544),O=n(547),g=n(81),x=n(26),f=Object(l.a)(m)((function(e){var t=e.classes,n=e.hue,i=Object(x.g)();return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(O.a,{}),Object(a.jsx)(v.a,{className:t.title,bold:!0,children:"Gestion des appareils Philips Hue"}),Object(a.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/bridge")},children:Object(a.jsxs)("div",{className:t.deviceHeader,children:[Object(a.jsx)(b.a,{size:50,className:t.deviceIcon,children:"Bridge"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(g.a,{className:t.deviceTitle,children:"Philips Hue"}),Object(a.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Le bridge est le point central d'une installation philips hue."})]}),Object(a.jsxs)("div",{className:t.deviceEnd,children:[(null===n||void 0===n?void 0:n._id)?Object(a.jsx)(g.a,{className:t.statusText,color:"success",children:"Connect\xe9"}):Object(a.jsx)(g.a,{className:t.statusText,color:"error",children:"Fail"}),Object(a.jsx)(s.a,{className:t.deviceIcon,children:Object(a.jsx)(b.a,{children:"Right"})})]})]})}),Object(a.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/room")},children:Object(a.jsxs)("div",{className:t.deviceHeader,children:[Object(a.jsx)(b.a,{size:40,className:t.deviceIcon,children:"Door"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(g.a,{className:t.deviceTitle,children:"Pi\xe8ces et zones"}),Object(a.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Agencez votre habitation et attribuez des lampes"})]}),Object(a.jsxs)("div",{className:t.deviceEnd,children:[Object(a.jsxs)(p.a,{children:["( ",function(){var e,t=0;if((null===n||void 0===n||null===(e=n.bridges)||void 0===e?void 0:e.length)>0){var a,i=Object(h.a)(n.bridges);try{for(i.s();!(a=i.n()).done;){var r,c,s=a.value;t=null!==(r=+(null===s||void 0===s||null===(c=s.groups)||void 0===c?void 0:c.length))&&void 0!==r?r:0}}catch(l){i.e(l)}finally{i.f()}}return t}()," )"]}),Object(a.jsx)(s.a,{className:t.deviceIcon,children:Object(a.jsx)(b.a,{children:"Right"})})]})]})}),Object(a.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/light")},children:Object(a.jsxs)("div",{className:t.deviceHeader,children:[Object(a.jsx)(b.a,{size:50,className:t.deviceIcon,children:"Lamp"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(g.a,{className:t.deviceTitle,children:"Configuration de la lumi\xe8re"}),Object(a.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Ajoutez de nouvelles lumi\xe8res ou modifiez les noms"})]}),Object(a.jsxs)("div",{className:t.deviceEnd,children:[Object(a.jsxs)(p.a,{children:["( ",function(){var e,t=0;if((null===n||void 0===n||null===(e=n.bridges)||void 0===e?void 0:e.length)>0){var a,i=Object(h.a)(n.bridges);try{for(i.s();!(a=i.n()).done;){var r,c,s=a.value;t=null!==(r=+(null===s||void 0===s||null===(c=s.lights)||void 0===c?void 0:c.length))&&void 0!==r?r:0}}catch(l){i.e(l)}finally{i.f()}}return t}()," )"]}),Object(a.jsx)(s.a,{className:t.deviceIcon,children:Object(a.jsx)(b.a,{children:"Right"})})]})]})})]})})),N=n(41),y=n(651),C=n(636),k=n(644),B=n(42),I=n.n(B),W=n(548),T=n(186),z=n(545),A=n(116),S=n(54),w=n(122),P=n(64),R=n(566),E=n.n(R),H=n(568),D=function(){var e=Object(H.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({updateQuery:function(e,t){var n=t.fetchMoreResult;return n||e}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();function F(){var e=Object(N.a)(["\n    query hueBridgeRegister($ipAddress: String!, $name: String!) {\n        hueBridgeRegister(ipAddress: $ipAddress, name: $name) {\n            ok\n            error\n        }\n    }\n"]);return F=function(){return e},e}function G(){var e=Object(N.a)(["\n    query hueBridgeConnection($ipAddress: String!) {\n        hueBridgeConnection(ipAddress: $ipAddress) {\n            ok\n            bridgeId\n        }\n    }\n"]);return G=function(){return e},e}var M=Object(l.a)(m)((function(e){var t=e.classes,n=e.open,s=e.setOpen,l=e.fetchMore,o=Object(c.a)(),d=Object(r.useState)(0),u=Object(i.a)(d,2),j=u[0],h=u[1],m=Object(r.useState)(null),O=Object(i.a)(m,2),x=O[0],f=O[1],N=Object(r.useState)(""),B=Object(i.a)(N,2),I=B[0],R=B[1],E=Object(r.useState)(""),H=Object(i.a)(E,2),F=H[0],G=H[1],M=Object(r.useState)(""),V=Object(i.a)(M,2),q=V[0],L=V[1],J=Object(r.useState)(!1),Q=Object(i.a)(J,2),K=Q[0],U=Q[1],X=Object(r.useState)(null),Y=Object(i.a)(X,2),Z=Y[0],ee=Y[1],te=["Entrer l'adresse IP du bridge","Connection au pont","Enjoy !"],ne=Object(S.a)($),ae=Object(i.a)(ne,2),ie=ae[0],re=ae[1],ce=Object(S.a)(_,{refetchQueries:["getPhilipsHueDevices"]}),se=Object(i.a)(ce,2),le=se[0],oe=se[1];Object(r.useEffect)((function(){var e;G(""),(null===re||void 0===re||null===(e=re.data)||void 0===e?void 0:e.hueBridgeConnection)&&(re.data.hueBridgeConnection.ok?(h(1),f(re.data.hueBridgeConnection)):G("La connection n'a pas pu \xeatre \xe9tablie. V\xe9rifiez que vous \xeates sur le bon r\xe9seau"))}),[re]),Object(r.useEffect)((function(){var e;L(""),(null===oe||void 0===oe||null===(e=oe.data)||void 0===e?void 0:e.hueBridgeRegister)&&oe.data.hueBridgeRegister.ok&&(h(2),U(!1),clearInterval(Z),ee(null),l&&D(l)),(null===oe||void 0===oe?void 0:oe.error)&&(L(oe.error),U(!1),clearInterval(Z),ee(null))}),[oe]);var de=function(){L(""),le({variables:{ipAddress:I,name:null===x||void 0===x?void 0:x.bridgeId}}),U(!0);var e=setInterval((function(){le({variables:{ipAddress:I,name:null===x||void 0===x?void 0:x.bridgeId}})}),5e3);ee(e)};Object(r.useEffect)((function(){return 1===j?de():Z&&(clearInterval(Z),ee(null)),function(){clearInterval(Z),ee(null)}}),[j]);return Object(a.jsx)(W.a,{open:n,onClose:function(){return s(!1)},maxWidth:"xl",children:Object(a.jsxs)("div",{className:t.modalWrapper,children:[Object(a.jsx)("div",{className:t.instructions,children:function(e){switch(e){case 0:return Object(a.jsxs)("div",{className:t.stepContent,children:[Object(a.jsx)(g.a,{className:t.stepTitle,children:"Entrez l'adresse IP du pont"}),Object(a.jsx)(p.a,{className:t.stepDescription,children:"Vous pourrez la trouver grace \xe0 un scanner de r\xe9seaux comme Fing"}),Object(a.jsx)(z.a,{autoFocus:!0,value:I,onChange:function(e){return R(e.target.value)},placeholder:"Adresse IP du pont"}),Object(a.jsx)(w.a,{errorMessage:F}),Object(a.jsx)(T.a,{onClick:function(){ie({variables:{ipAddress:I}})},disabled:!Object(A.c)(I),loading:null===re||void 0===re?void 0:re.loading,children:"Tester la connection au pont"})]});case 1:return Object(a.jsxs)("div",{className:t.stepContent,children:[Object(a.jsx)(v.a,{bold:!0,center:!0,className:t.stepTitle,children:"Appuyer sur le bouton central"}),Object(a.jsx)(p.a,{center:!0,className:t.stepDescription,children:"Appuyer sur le bouton central du pont pour autoriser sa connection"}),Object(a.jsx)("img",{className:t.bridgeImage,src:"/assets/images/bridgeClick.png",alt:"bridgeClick"}),K&&Object(a.jsx)(P.a,{smallCircular:!0}),Object(a.jsx)(w.a,{className:t.errorMessage,errorMessage:q}),q&&Object(a.jsx)(T.a,{onClick:function(){return de()},children:"Essayer \xe0 nouveau"}),Object(a.jsx)("div",{className:t.buttonWrapper,children:Object(a.jsx)(T.a,{onClick:function(){return h(0)},className:t.button,children:"Back"})})]});case 2:return Object(a.jsxs)("div",{className:t.stepContent,children:[Object(a.jsx)(v.a,{bold:!0,center:!0,className:t.stepTitle,children:"Vous avez ajout\xe9 votre pont \xe0 Domoticz"}),Object(a.jsx)(p.a,{center:!0,className:t.stepDescription,children:"Vous pourrez d\xe8s \xe0 pr\xe9sent configurer l'essemble de vos lampes et pi\xe8ces !"}),Object(a.jsx)(b.a,{className:t.iconWrapper,color:o.palette.primary.main,size:50,children:"Checked"}),Object(a.jsx)(T.a,{className:t.closeButtonWrapper,fullWidth:!0,onClick:function(){return s(!1)},children:"Fermer"})]})}}(j)}),Object(a.jsx)(y.a,{activeStep:j,children:te.map((function(e){return Object(a.jsx)(C.a,{children:Object(a.jsx)(k.a,{children:e})},e)}))})]})})})),$=I()(G()),_=I()(F()),V=n(27);t.default=Object(l.a)(u)((function(e){var t=e.classes,n=Object(c.a)(),l=Object(r.useState)(!1),o=Object(i.a)(l,2),d=o[0],u=o[1],h=Object(V.c)((function(e){return e.devices.philipsHue}));return console.log(h),Object(a.jsxs)("div",{className:t.root,children:[h&&(null===h||void 0===h?void 0:h.bridges)?Object(a.jsx)(f,{hue:h}):Object(a.jsxs)(j.a,{className:t.addBridge,children:[Object(a.jsx)(v.a,{bold:!0,center:!0,children:"Vous n'avez pas encore de Pont Philips Hue"}),Object(a.jsx)(p.a,{center:!0,className:t.addBridgeDescription,children:"Avant de commencer \xe0 configurer votre installation, vous devez connecter un bridge philips hue"}),Object(a.jsx)("img",{className:t.bridgeImage,src:"/assets/images/bridge.png",alt:"bridge"}),Object(a.jsx)(s.a,{className:t.addBridgeicon,onClick:function(){return u(!0)},children:Object(a.jsx)(b.a,{color:n.palette.primary.main,size:50,children:"Add"})})]}),Object(a.jsx)(M,{hue:h,open:d,setOpen:u})]})}))}}]);