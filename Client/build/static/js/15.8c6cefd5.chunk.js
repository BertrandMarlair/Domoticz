(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[15],{545:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(26)),c=a.n(r),s=a(62),l=a.n(s),o=a(124);t.a=l()(o.a)((function(e){var t,a=Object.assign({},e),r=a.classes,s=a.children,l=a.center,o=a.className,d=a.color,u=a.bold,j=a.normal,b=a.light,p=a.style,h=a.small,m=c()((t={},Object(i.a)(t,r.defaultFontStyle,!0),Object(i.a)(t,r.title,!0),Object(i.a)(t,o,!0),Object(i.a)(t,r[d],d),Object(i.a)(t,r.center,l),Object(i.a)(t,r.bold,u),Object(i.a)(t,r.normal,j),Object(i.a)(t,r.light,b),Object(i.a)(t,r.smaller,h),t));return Object(n.jsx)("div",{className:m,style:p,children:s})}))},546:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(630)),s=a(640),l=a(506),o=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(l.a)(o)((function(e){var t=e.classes,a=e.onChange,l=e.value,o=e.endAdornment,d=e.placeholder,u=e.disabled,j=e.helperText,b=e.autoComplete,p=e.type,h=e.error,m=e.marginRight,v=e.minWidth,O=e.multiline,g=e.rows,x=e.autoFocus,f=Object(r.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(n.jsx)(c.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:m?40:0,minWidth:v?230:0},children:Object(n.jsx)(s.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},f),InputProps:{endAdornment:o?Object(n.jsx)("div",{className:t.endAdornment,children:o}):null},value:l,onChange:a,placeholder:d,disabled:u,autoComplete:b,type:p,helperText:j,error:h,multiline:O,rows:g,autoFocus:x})})}))},548:function(e,t,a){"use strict";var n=a(1),i=a(101),r=a(5),c=a(0),s=a(506),l=a(65),o=a(537),d=a(550),u=a(26),j=a.n(u),b=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.default,padding:0,outline:"none",borderRadius:10,display:"flex"},header:{padding:15,display:"flex",alignItems:"center",background:e.palette.background.paper},body:{padding:15},iconButton:{marginLeft:10},headerTitle:{marginLeft:30,marginRight:80},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"},backDrop:{backdropFilter:"blur(8px)"}}},p=a(567),h=a(61),m=a(545);t.a=Object(s.a)(b)((function(e){var t,a=e.classes,s=e.className,u=e.children,b=e.open,v=e.onClose,O=e.fullWidth,g=e.maxWidth,x=e.title,f=j()((t={},Object(r.a)(t,s,s),Object(r.a)(t,a[g],g),t)),N=Object(l.a)(),y=Object(o.a)(N.breakpoints.down("xs"));return Object(c.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(n){a.e(n)}finally{a.f()}}),100)}),[b]),Object(n.jsx)(p.a,{open:b,onClose:v,fullScreen:y||O,className:f,maxWidth:g,PaperProps:{classes:{root:a.root}},BackdropProps:{classes:{root:a.backDrop}},children:Object(n.jsxs)("div",{className:a.paper,children:[v&&Object(n.jsxs)("div",{className:a.header,children:[Object(n.jsx)(d.a,{className:a.iconButton,"aria-label":"Delete",onClick:v,children:Object(n.jsx)(h.a,{size:18,color:N.palette.text.contrasted,children:"Close"})}),x&&Object(n.jsx)(m.a,{normal:!0,className:a.headerTitle,children:x})]}),Object(n.jsx)("div",{className:a.body,children:u})]})})}))},549:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(506)),c=function(){return{root:{width:"100%",display:"flex"},button:{}}},s=a(26),l=a.n(s),o=a(186),d=a(61),u=a(27);t.a=Object(r.a)(c)((function(e){var t,a=e.classes,r=e.className,c=Object(u.g)(),s=l()((t={},Object(i.a)(t,a.button,!0),Object(i.a)(t,r,r),t));return Object(n.jsx)("div",{className:a.root,children:Object(n.jsxs)(o.a,{className:s,color:"transparent",onClick:function(){return c.goBack()},children:[Object(n.jsx)(d.a,{children:"Left"}),"Back"]})})}))},566:function(e,t,a){"use strict";var n=a(4),i=a(7);t.a=function(){return{modalWrapper:{padding:30},modalButtonWrapper:Object(n.a)({},i.p),iconWrapper:Object(n.a)(Object(n.a)({},i.o),{},{marginTop:50}),closeButtonWrapper:{marginTop:"50px !important"},stepContent:{margin:20},stepTitle:{marginBottom:20},stepDescription:{marginBottom:10},buttonWrapper:{display:"flex",alignItems:"center"},bridgeImage:{width:200,display:"block",margin:"50px auto"},addBridgeicon:{display:"block",margin:"auto"},errorMessage:{textAlign:"center",fontSize:16},device:Object(n.a)(Object(n.a)({},i.m),{},{padding:"0 20px",minHeight:90,cursor:"pointer"}),deviceHeader:Object(n.a)(Object(n.a)({},i.q),{},{width:"100%"}),deviceIcon:{margin:20},deviceTitle:{marginBottom:2},deviceText:{marginBottom:8},deviceEnd:{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:1},title:{margin:"30px 16px",fontSize:"1.4rem"}}}},578:function(e,t,a){"use strict";var n=a(41),i=a(1),r=a(20),c=a(0),s=a(65),l=a(652),o=a(638),d=a(644),u=a(17),j=a(566),b=a(42),p=a.n(b),h=a(75),m=a(545),v=a(61),O=a(548),g=a(186),x=a(546),f=a(81),N=a(177),y=a(53),C=a(122),k=a(63),B=a(563),A=a.n(B),I=a(564),T=function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({updateQuery:function(e,t){var a=t.fetchMoreResult;return a||e}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();function W(){var e=Object(n.a)(["\n    query hueBridgeRegister($ipAddress: String!, $name: String!) {\n        hueBridgeRegister(ipAddress: $ipAddress, name: $name) {\n            ok\n            error\n        }\n    }\n"]);return W=function(){return e},e}function z(){var e=Object(n.a)(["\n    query hueBridgeAddConnection($ipAddress: String!) {\n        hueBridgeAddConnection(ipAddress: $ipAddress) {\n            ok\n            bridgeId\n        }\n    }\n"]);return z=function(){return e},e}t.a=Object(u.a)(j.a)((function(e){var t=e.classes,a=e.open,n=e.setOpen,u=e.fetchMore,j=Object(s.a)(),b=Object(c.useState)(0),p=Object(r.a)(b,2),B=p[0],A=p[1],I=Object(c.useState)(null),W=Object(r.a)(I,2),z=W[0],P=W[1],R=Object(c.useState)(""),D=Object(r.a)(R,2),E=D[0],H=D[1],F=Object(c.useState)(""),q=Object(r.a)(F,2),G=q[0],L=q[1],M=Object(c.useState)(""),$=Object(r.a)(M,2),_=$[0],V=$[1],J=Object(c.useState)(!1),Q=Object(r.a)(J,2),K=Q[0],U=Q[1],X=Object(c.useState)(null),Y=Object(r.a)(X,2),Z=Y[0],ee=Y[1],te=["Entrer l'adresse IP du bridge","Connection au pont","Enjoy !"],ae=Object(y.a)(S),ne=Object(r.a)(ae,2),ie=ne[0],re=ne[1],ce=Object(y.a)(w,{refetchQueries:["getPhilipsHueDevices"]}),se=Object(r.a)(ce,2),le=se[0],oe=se[1];Object(c.useEffect)((function(){var e,t;(L(""),(null===re||void 0===re||null===(e=re.data)||void 0===e?void 0:e.hueBridgeAddConnection)&&(re.data.hueBridgeAddConnection.ok?(A(1),P(re.data.hueBridgeAddConnection)):L("La connection n'a pas pu \xeatre \xe9tablie. V\xe9rifiez que vous \xeates sur le bon r\xe9seau")),null===re||void 0===re?void 0:re.error)&&L(null===re||void 0===re||null===(t=re.error)||void 0===t?void 0:t.message)}),[re]),Object(c.useEffect)((function(){var e;V(""),(null===oe||void 0===oe||null===(e=oe.data)||void 0===e?void 0:e.hueBridgeRegister)&&oe.data.hueBridgeRegister.ok&&(A(2),U(!1),clearInterval(Z),ee(null),u&&T(u)),(null===oe||void 0===oe?void 0:oe.error)&&(V(oe.error),U(!1),clearInterval(Z),ee(null))}),[oe]);var de=function(){V(""),le({variables:{ipAddress:E,name:null===z||void 0===z?void 0:z.bridgeId}}),U(!0);var e=setInterval((function(){le({variables:{ipAddress:E,name:null===z||void 0===z?void 0:z.bridgeId}})}),5e3);ee(e)};Object(c.useEffect)((function(){return 1===B?de():Z&&(clearInterval(Z),ee(null)),function(){clearInterval(Z),ee(null)}}),[B]);return Object(i.jsx)(O.a,{open:a,onClose:function(){return n(!1)},maxWidth:"xl",title:"Ajouter un nouveau pont",children:Object(i.jsxs)("div",{className:t.modalWrapper,children:[Object(i.jsx)("div",{className:t.instructions,children:function(e){switch(e){case 0:return Object(i.jsxs)("div",{className:t.stepContent,children:[Object(i.jsx)(f.a,{className:t.stepTitle,children:"Entrez l'adresse IP du pont"}),Object(i.jsx)(h.a,{className:t.stepDescription,children:"Vous pourrez la trouver grace \xe0 un scanner de r\xe9seaux comme Fing"}),Object(i.jsx)(x.a,{autoFocus:!0,value:E,onChange:function(e){return H(e.target.value)},placeholder:"Adresse IP du pont"}),Object(i.jsx)(C.a,{errorMessage:G}),Object(i.jsx)(g.a,{onClick:function(){ie({variables:{ipAddress:E}})},disabled:!Object(N.b)(E),loading:null===re||void 0===re?void 0:re.loading,children:"Tester la connection au pont"})]});case 1:return Object(i.jsxs)("div",{className:t.stepContent,children:[Object(i.jsx)(m.a,{bold:!0,center:!0,className:t.stepTitle,children:"Appuyer sur le bouton central"}),Object(i.jsx)(h.a,{center:!0,className:t.stepDescription,children:"Appuyer sur le bouton central du pont pour autoriser sa connection"}),Object(i.jsx)("img",{className:t.bridgeImage,src:"/assets/images/bridgeClick.png",alt:"bridgeClick"}),K&&Object(i.jsx)(k.a,{smallCircular:!0}),Object(i.jsx)(C.a,{className:t.errorMessage,errorMessage:_}),_&&Object(i.jsx)(g.a,{onClick:function(){return de()},children:"Essayer \xe0 nouveau"}),Object(i.jsx)("div",{className:t.buttonWrapper,children:Object(i.jsx)(g.a,{onClick:function(){return A(0)},className:t.button,children:"Back"})})]});case 2:return Object(i.jsxs)("div",{className:t.stepContent,children:[Object(i.jsx)(m.a,{bold:!0,center:!0,className:t.stepTitle,children:"Vous avez ajout\xe9 votre pont \xe0 Domoticz"}),Object(i.jsx)(h.a,{center:!0,className:t.stepDescription,children:"Vous pourrez d\xe8s \xe0 pr\xe9sent configurer l'essemble de vos lampes et pi\xe8ces !"}),Object(i.jsx)(v.a,{className:t.iconWrapper,color:j.palette.primary.main,size:50,children:"Checked"}),Object(i.jsx)(g.a,{className:t.closeButtonWrapper,fullWidth:!0,onClick:function(){return n(!1)},children:"Fermer"})]})}}(B)}),Object(i.jsx)(l.a,{activeStep:B,children:te.map((function(e){return Object(i.jsx)(o.a,{children:Object(i.jsx)(d.a,{children:e})},e)}))})]})})}));var S=p()(z()),w=p()(W())},646:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(20),r=a(0),c=a(65),s=a(550),l=a(17),o=a(4),d=a(7),u=function(){return{root:{maxWidth:d.x,margin:"auto",padding:40},card:{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"},description:{marginTop:20,marginBottom:50,flexGrow:1},addProvider:Object(o.a)({},d.m),addProviderHeader:Object(o.a)({},d.q),addProviderIcon:{margin:20},addProviderTitle:{marginBottom:2},addProviderText:{marginBottom:8},addBridge:{width:"fit-content",margin:"auto"},addBridgeDescription:{marginTop:30},bridgeImage:{width:200,display:"block",margin:"50px auto"},addBridgeicon:{display:"block",margin:"auto"}}},j=a(187),b=a(61),p=a(75),h=a(101),m=a(566),v=a(545),O=a(549),g=a(81),x=a(27),f=Object(l.a)(m.a)((function(e){var t=e.classes,a=e.hue,i=Object(x.g)();return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(O.a,{}),Object(n.jsx)(v.a,{className:t.title,bold:!0,children:"Gestion des appareils Philips Hue"}),Object(n.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/bridge")},children:Object(n.jsxs)("div",{className:t.deviceHeader,children:[Object(n.jsx)(b.a,{size:50,className:t.deviceIcon,children:"Bridge"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{className:t.deviceTitle,children:"Philips Hue"}),Object(n.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Le bridge est le point central d'une installation philips hue."})]}),Object(n.jsxs)("div",{className:t.deviceEnd,children:[(null===a||void 0===a?void 0:a._id)?Object(n.jsx)(g.a,{className:t.statusText,color:"success",children:"Connect\xe9"}):Object(n.jsx)(g.a,{className:t.statusText,color:"error",children:"Fail"}),Object(n.jsx)(s.a,{className:t.deviceIcon,children:Object(n.jsx)(b.a,{children:"Right"})})]})]})}),Object(n.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/room")},children:Object(n.jsxs)("div",{className:t.deviceHeader,children:[Object(n.jsx)(b.a,{size:40,className:t.deviceIcon,children:"Door"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{className:t.deviceTitle,children:"Pi\xe8ces et zones"}),Object(n.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Agencez votre habitation et attribuez des lampes"})]}),Object(n.jsxs)("div",{className:t.deviceEnd,children:[Object(n.jsxs)(p.a,{children:["( ",function(){var e,t=0;if((null===a||void 0===a||null===(e=a.bridges)||void 0===e?void 0:e.length)>0){var n,i=Object(h.a)(a.bridges);try{for(i.s();!(n=i.n()).done;){var r,c,s=n.value;t=null!==(r=+(null===s||void 0===s||null===(c=s.groups)||void 0===c?void 0:c.length))&&void 0!==r?r:0}}catch(l){i.e(l)}finally{i.f()}}return t}()," )"]}),Object(n.jsx)(s.a,{className:t.deviceIcon,children:Object(n.jsx)(b.a,{children:"Right"})})]})]})}),Object(n.jsx)(j.a,{className:t.device,onClick:function(){return i.push("/provider/philips_hue/light")},children:Object(n.jsxs)("div",{className:t.deviceHeader,children:[Object(n.jsx)(b.a,{size:50,className:t.deviceIcon,children:"Lamp"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{className:t.deviceTitle,children:"Configuration de la lumi\xe8re"}),Object(n.jsx)(p.a,{className:t.deviceText,color:"lightGrey",children:"Ajoutez de nouvelles lumi\xe8res ou modifiez les noms"})]}),Object(n.jsxs)("div",{className:t.deviceEnd,children:[Object(n.jsxs)(p.a,{children:["( ",function(){var e,t=0;if((null===a||void 0===a||null===(e=a.bridges)||void 0===e?void 0:e.length)>0){var n,i=Object(h.a)(a.bridges);try{for(i.s();!(n=i.n()).done;){var r,c,s=n.value;t=null!==(r=+(null===s||void 0===s||null===(c=s.lights)||void 0===c?void 0:c.length))&&void 0!==r?r:0}}catch(l){i.e(l)}finally{i.f()}}return t}()," )"]}),Object(n.jsx)(s.a,{className:t.deviceIcon,children:Object(n.jsx)(b.a,{children:"Right"})})]})]})})]})})),N=a(578),y=a(24);t.default=Object(l.a)(u)((function(e){var t,a=e.classes,l=Object(c.a)(),o=Object(r.useState)(!1),d=Object(i.a)(o,2),u=d[0],h=d[1],m=Object(y.c)((function(e){return e.devices.philipsHue}));return Object(n.jsxs)("div",{className:a.root,children:[m&&(null===m||void 0===m||null===(t=m.bridges)||void 0===t?void 0:t.length)?Object(n.jsx)(f,{hue:m}):Object(n.jsxs)(j.a,{className:a.addBridge,children:[Object(n.jsx)(v.a,{bold:!0,center:!0,children:"Vous n'avez pas encore de Pont Philips Hue"}),Object(n.jsx)(p.a,{center:!0,className:a.addBridgeDescription,children:"Avant de commencer \xe0 configurer votre installation, vous devez connecter un bridge philips hue"}),Object(n.jsx)("img",{className:a.bridgeImage,src:"/assets/images/bridge.png",alt:"bridge"}),Object(n.jsx)(s.a,{className:a.addBridgeicon,onClick:function(){return h(!0)},children:Object(n.jsx)(b.a,{color:l.palette.primary.main,size:50,children:"Add"})})]}),Object(n.jsx)(N.a,{hue:m,open:u,setOpen:h})]})}))}}]);