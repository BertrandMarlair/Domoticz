(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[20],{544:function(e,t,r){"use strict";var n=r(1),i=r(5),a=(r(0),r(25)),o=r.n(a),c=r(62),l=r.n(c),d=r(124);t.a=l()(d.a)((function(e){var t,r=Object.assign({},e),a=r.classes,c=r.children,l=r.center,d=r.className,s=r.color,u=r.bold,j=r.normal,b=r.light,v=r.style,p=r.small,O=o()((t={},Object(i.a)(t,a.defaultFontStyle,!0),Object(i.a)(t,a.title,!0),Object(i.a)(t,d,!0),Object(i.a)(t,a[s],s),Object(i.a)(t,a.center,l),Object(i.a)(t,a.bold,u),Object(i.a)(t,a.normal,j),Object(i.a)(t,a.light,b),Object(i.a)(t,a.smaller,p),t));return Object(n.jsx)("div",{className:O,style:v,children:c})}))},545:function(e,t,r){"use strict";var n=r(1),i=r(4),a=r(82),o=(r(0),r(627)),c=r(637),l=r(505),d=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(l.a)(d)((function(e){var t=e.classes,r=e.onChange,l=e.value,d=e.endAdornment,s=e.placeholder,u=e.disabled,j=e.helperText,b=e.autoComplete,v=e.type,p=e.error,O=e.marginRight,h=e.minWidth,m=e.multiline,x=e.rows,f=e.autoFocus,g=Object(a.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(n.jsx)(o.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:O?40:0,minWidth:h?230:0},children:Object(n.jsx)(c.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},g),InputProps:{endAdornment:d?Object(n.jsx)("div",{className:t.endAdornment,children:d}):null},value:l,onChange:r,placeholder:s,disabled:u,autoComplete:b,type:v,helperText:j,error:p,multiline:m,rows:x,autoFocus:f})})}))},548:function(e,t,r){"use strict";var n=r(1),i=r(151),a=r(5),o=r(0),c=r(505),l=r(63),d=r(536),s=r(550),u=r(25),j=r.n(u),b=function(e){return{paper:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.paper,padding:0,outline:"none",borderRadius:8,height:"100%",display:"flex"},iconButton:{position:"absolute",zIndex:"4",right:"5px",top:"5px"},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"}}},v=r(563),p=r(61);t.a=Object(c.a)(b)((function(e){var t,r=e.classes,c=e.className,u=e.children,b=e.open,O=e.onClose,h=e.fullWidth,m=e.maxWidth,x=j()((t={},Object(a.a)(t,c,c),Object(a.a)(t,r[m],m),t)),f=Object(l.a)(),g=Object(d.a)(f.breakpoints.down("xs"));return Object(o.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),r=Object(i.a)(t);try{for(r.s();!(e=r.n()).done;){e.value.removeAttribute("tabindex")}}catch(n){r.e(n)}finally{r.f()}}),100)}),[b]),Object(n.jsx)(v.a,{open:b,onClose:O,fullScreen:g||h,className:x,maxWidth:m,disableBackdropClick:!0,children:Object(n.jsxs)("div",{className:r.paper,children:[O&&Object(n.jsx)(s.a,{className:r.iconButton,"aria-label":"Delete",onClick:O,children:Object(n.jsx)(p.a,{size:16,color:f.palette.text.contrasted,children:"Close"})}),u]})})}))},640:function(e,t,r){"use strict";r.r(t);var n=r(41),i=r(1),a=r(23),o=r(0),c=r(556),l=r(550),d=r(542),s=r(543),u=r(16),j=r(5),b=r(4),v=r(7),p=function(){var e;return e={root:{maxWidth:v.F,margin:"auto",minHeight:"90vh",padding:10}},Object(j.a)(e,"@media (max-width: ".concat(v.F,"px)"),{container:{width:"100%",margin:"auto"}}),Object(j.a)(e,"gridItem",{padding:20}),Object(j.a)(e,"card",{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"}),Object(j.a)(e,"description",{marginTop:20,marginBottom:50,flexGrow:1}),Object(j.a)(e,"addProvider",Object(b.a)(Object(b.a)({},v.r),{},{margin:20})),Object(j.a)(e,"addProviderHeader",Object(b.a)({},v.v)),Object(j.a)(e,"addProviderIcon",{margin:20}),Object(j.a)(e,"addProviderTitle",{marginBottom:2}),Object(j.a)(e,"addProviderText",{marginBottom:8}),Object(j.a)(e,"option",{display:"flex",flexDirection:"row-reverse"}),e},O=r(42),h=r.n(O),m=r(54),x=r(64),f=r(122),g=r(187),N=r(544),C=r(75),S=r(548),P=r(186),y=r(61),_=r(101),T=r(81),W=r(66),w=function(){return{wrapper:{padding:20},title:{marginBottom:20},description:{marginBottom:30},label:{margin:"5px 0"},input:{marginTop:20,marginBottom:10,width:"100%"},form:{width:"100%",padding:30,paddingTop:0},formFooter:{marginTop:30}}},k=r(279),z=r(505),E=r(545),I=r(76);function F(){var e=Object(n.a)(["\n    mutation editProvider($provider: editProviderInput!) {\n        editProvider(provider: $provider) {\n            _id\n            title\n            slug\n            button\n            icon\n            description\n        }\n    }\n"]);return F=function(){return e},e}function A(){var e=Object(n.a)(["\n    mutation createProvider($provider: createProviderInput!) {\n        createProvider(provider: $provider) {\n            _id\n            title\n            slug\n            button\n            icon\n            description\n        }\n    }\n"]);return A=function(){return e},e}var B=Object(z.a)(w)((function(e){var t,r,n,c,l,d=e.classes,s=e.history,u=e.onClose,j=e.setProviders,v=e.option,p=e.providers,O=Object(o.useState)(null!==(t=null===v||void 0===v?void 0:v.title)&&void 0!==t?t:""),h=Object(a.a)(O,2),x=h[0],g=h[1],S=Object(o.useState)(null),y=Object(a.a)(S,2),_=y[0],w=y[1],z=Object(o.useState)(null!==(r=null===v||void 0===v?void 0:v.description)&&void 0!==r?r:""),F=Object(a.a)(z,2),A=F[0],B=F[1],R=Object(o.useState)(null),M=Object(a.a)(R,2),$=M[0],q=M[1],H=Object(o.useState)(null!==(n=null===v||void 0===v?void 0:v.slug)&&void 0!==n?n:""),G=Object(a.a)(H,2),J=G[0],K=G[1],Q=Object(o.useState)(null),U=Object(a.a)(Q,2),V=U[0],X=U[1],Y=Object(o.useState)(null!==(c=null===v||void 0===v?void 0:v.icon)&&void 0!==c?c:""),Z=Object(a.a)(Y,2),ee=Z[0],te=Z[1],re=Object(o.useState)(null),ne=Object(a.a)(re,2),ie=ne[0],ae=ne[1],oe=Object(o.useState)(null!==(l=null===v||void 0===v?void 0:v.button)&&void 0!==l?l:""),ce=Object(a.a)(oe,2),le=ce[0],de=ce[1],se=Object(o.useState)(null),ue=Object(a.a)(se,2),je=ue[0],be=ue[1],ve=null===v||void 0===v?void 0:v._id,pe=Object(k.a)().t,Oe=Object(m.b)(D),he=Object(a.a)(Oe,2),me=he[0],xe=he[1],fe=Object(m.b)(L),ge=Object(a.a)(fe,2),Ne=ge[0],Ce=ge[1];Object(o.useEffect)((function(){var e,t;(null===xe||void 0===xe||null===(e=xe.data)||void 0===e||null===(t=e.createProvider)||void 0===t?void 0:t._id)&&(Object(I.a)("Success",{variant:"success"}),j((function(e){return[].concat(Object(W.a)(e),[Object(b.a)({},null===xe||void 0===xe?void 0:xe.data.createProvider)])})),u())}),[xe,s,pe]),Object(o.useEffect)((function(){var e,t;if(null===Ce||void 0===Ce||null===(e=Ce.data)||void 0===e||null===(t=e.editProvider)||void 0===t?void 0:t._id){Object(I.a)("Success",{variant:"success"});var r=Ce.data.editProvider,n=p.findIndex((function(e){return e._id===r._id}));j([].concat(Object(W.a)(p.slice(0,n)),[Object(b.a)({},r)],Object(W.a)(p.slice(n+1)))),u()}}),[Ce,s,pe]);return Object(i.jsxs)("div",{className:d.wrapper,children:[Object(i.jsx)("div",{className:d.title,children:Object(i.jsx)(N.a,{normal:!0,centered:!0,children:ve?"Edition de ".concat(v.title):"Creation d'un provider"})}),Object(i.jsx)("div",{className:d.description,children:Object(i.jsx)(C.a,{noWrap:!0,centered:!0,children:"Le provider est le point central d'un device domotique pour la maison. Ils sont centralis\xe9 par un provider. S\xe9lectionnez le provider correspondant \xe0 votre appareil. Faites attention lors de la creation. Si vous n'\xeates pas certain de ce que vous faite, contact\xe9 un admin"})}),Object(i.jsxs)("form",{className:d.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;if(x.length<2?(w("Le titre est trop court"),t=!1):w(""),A.length<2?(q("La description est trop courte"),t=!1):q(""),J.length<2?(X("Le slug est trop court"),t=!1):X(""),ee.length<2?(ae("L'icon est trop court"),t=!1):ae(""),le.length<2?(be("Le bouton est trop court"),t=!1):be(""),t)if(ve){var r={provider:{_id:v._id,title:x,description:A,slug:J,icon:ee,button:le}};Ne({variables:r})}else me({variables:{provider:{title:x,description:A,slug:J,icon:ee,button:le}}})}(e)},children:[Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(T.a,{color:"label",className:d.label,children:"Titre"}),Object(i.jsx)(E.a,{autoFocus:!0,value:x,onChange:function(e){return g(e.target.value)},placeholder:"Entrez un titre",type:"text",helperText:pe(_),error:!!_})]}),Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(T.a,{color:"label",className:d.label,children:"Slug"}),Object(i.jsx)(E.a,{value:J,onChange:function(e){return K(e.target.value)},placeholder:"Entrez un slug",type:"text",helperText:pe(V),error:!!V})]}),Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(T.a,{color:"label",className:d.label,children:"Description"}),Object(i.jsx)(E.a,{value:A,onChange:function(e){return B(e.target.value)},placeholder:"Entrez une description",type:"text",helperText:pe($),error:!!$})]}),Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(T.a,{color:"label",className:d.label,children:"Icon"}),Object(i.jsx)(E.a,{value:ee,onChange:function(e){return te(e.target.value)},placeholder:"Entrez un icon",type:"text",helperText:pe(ie),error:!!ie})]}),Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(T.a,{color:"label",className:d.label,children:"Button"}),Object(i.jsx)(E.a,{value:le,onChange:function(e){return de(e.target.value)},placeholder:"Entrez le nom du boutton",type:"text",helperText:pe(je),error:!!je})]}),Object(i.jsx)(f.a,{errorMessage:null===xe||void 0===xe?void 0:xe.error}),Object(i.jsx)("div",{className:d.formFooter,children:Object(i.jsx)(P.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:null===xe||void 0===xe?void 0:xe.loading,children:ve?"Editer le provider":"Cr\xe9er le provider"})})]})]})})),D=h()(A()),L=h()(F()),R=r(268);function M(){var e=Object(n.a)(["\n    mutation deleteProvider($_id: ID!) {\n        deleteProvider(_id: $_id) {\n            _id\n        }\n    }\n"]);return M=function(){return e},e}var $=Object(z.a)(w)((function(e){var t=e.classes,r=e.onClose,n=e.option,c=e.providers,l=e.setProviders,d=Object(k.a)().t,s=Object(o.useState)(),u=Object(a.a)(s,2),j=u[0],b=u[1],v=Object(o.useState)(),p=Object(a.a)(v,2),O=p[0],h=p[1],x=Object(m.b)(q),g=Object(a.a)(x,2),S=g[0],y=g[1];Object(o.useEffect)((function(){var e,t;if(null===y||void 0===y||null===(e=y.data)||void 0===e||null===(t=e.deleteProvider)||void 0===t?void 0:t._id){Object(I.a)("Success",{variant:"success"});var n=y.data.deleteProvider,i=c.findIndex((function(e){return e._id===n._id}));l([].concat(Object(W.a)(c.slice(0,i)),Object(W.a)(c.slice(i+1)))),r()}}),[y,history,d]);return Object(i.jsxs)("div",{className:t.wrapper,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsxs)(N.a,{normal:!0,centered:!0,children:["Suppression de ",null===n||void 0===n?void 0:n.title]})}),Object(i.jsx)("div",{className:t.description,children:Object(i.jsx)(C.a,{noWrap:!0,centered:!0,children:"Si vous supprimer le provider vous devrez le reconfigurer si vous souhaiter le remettre \xe0 therme. Faite attention. Confirmer le avec le nom du provider."})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;j!==n.title?(h("Les titres ne correspondent pas"),t=!1):h(""),t&&S({variables:{_id:n._id}})}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(T.a,{color:"label",className:t.label,children:"Titre du provider \xe0 supprimer"}),Object(i.jsx)(E.a,{autoFocus:!0,value:j,onChange:function(e){return b(e.target.value)},placeholder:"Titre du provider",type:"text",helperText:d(O),error:!!O})]}),Object(i.jsx)(f.a,{errorMessage:null===y||void 0===y?void 0:y.error}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(P.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",color:"error",loading:null===y||void 0===y?void 0:y.loading,children:"Supprimer le provider"})})]})]})})),q=h()(M());function H(){var e=Object(n.a)(["\n    query getAllProviders {\n        getAllProviders {\n            _id\n            title\n            icon\n            slug\n            button\n            description\n        }\n    }\n"]);return H=function(){return e},e}t.default=Object(u.a)(p)((function(e){var t=e.classes,r=e.history,n=Object(o.useState)(!1),u=Object(a.a)(n,2),j=u[0],b=u[1],v=Object(o.useState)([]),p=Object(a.a)(v,2),O=p[0],h=p[1],W=Object(o.useState)(!1),w=Object(a.a)(W,2),k=w[0],z=w[1],E=Object(o.useState)(!1),I=Object(a.a)(E,2),F=I[0],A=I[1],D=Object(o.useState)(null),L=Object(a.a)(D,2),M=L[0],q=L[1],H=Object(o.useState)(!1),J=Object(a.a)(H,2),K=J[0],Q=J[1],U=Object(_.a)(),V=Object(m.c)(G),X=V.data,Y=V.loading,Z=V.error,ee=function(){z(!1),q(null)},te=function(){A(!1),q(null)},re=function(){Q(null)};return Object(o.useEffect)((function(){Y||!1!==j||b(!0)}),[Y,j]),Object(o.useEffect)((function(){(null===X||void 0===X?void 0:X.getAllProviders)&&h(X.getAllProviders)}),[X]),Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsxs)(g.a,{className:t.addProvider,children:[Object(i.jsxs)("div",{className:t.addProviderHeader,children:[Object(i.jsx)(y.a,{color:U.palette.primary.main,className:t.addProviderIcon,children:"Checked"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(T.a,{className:t.addProviderTitle,children:"Cr\xe9er un nouveau provider"}),Object(i.jsx)(C.a,{className:t.addProviderText,color:"lightGrey",children:"Le provider est le point central d'un produit domotique pour la maison."})]})]}),Object(i.jsx)(P.a,{round:!0,size:"sm",onClick:function(){return z(!0)},children:"Add new provider"})]}),Object(i.jsxs)(c.a,{container:!0,className:t.container,children:[Object(i.jsx)(f.a,{errorMessage:Z}),O.map((function(e){return Object(i.jsxs)(c.a,{item:!0,lg:4,md:4,xs:12,className:t.gridItem,children:[Object(i.jsxs)(g.a,{className:t.card,children:[Object(i.jsx)("div",{className:t.option,children:Object(i.jsx)(l.a,{onClick:function(t){return r=t,n=e._id,void Q({event:r.currentTarget,providerId:n});var r,n},children:Object(i.jsx)(y.a,{children:"More"})})}),Object(i.jsx)(y.a,{center:!0,size:60,children:e.icon}),Object(i.jsx)(N.a,{bold:!0,center:!0,children:e.title}),Object(i.jsx)(C.a,{center:!0,noWrap:!0,className:t.description,children:e.description}),Object(i.jsx)(P.a,{onClick:function(){return r.push("/provider/".concat(e.slug))},fullWidth:!0,children:e.button})]}),Object(i.jsx)(R.a,{placement:"bottom",anchorEl:(null===K||void 0===K?void 0:K.providerId)===e._id&&K.event,handleClose:re,children:Object(i.jsxs)(d.a,{children:[Object(i.jsx)(s.a,{onClick:function(){return function(e){z(!0),q(e)}(e)},children:Object(i.jsx)(T.a,{normal:!0,children:"Edit provider"})}),Object(i.jsx)(s.a,{onClick:function(){return function(e){A(!0),q(e)}(e)},children:Object(i.jsx)(T.a,{normal:!0,children:"Delete provider"})})]})})]},"provider/".concat(e.slug))}))]}),Y&&Object(i.jsx)(x.a,{absolute:!0}),Object(i.jsx)(S.a,{open:k,onClose:function(){return ee()},children:Object(i.jsx)(B,{onClose:function(){return ee()},option:M,setProviders:h,providers:O})}),Object(i.jsx)(S.a,{open:F,onClose:function(){return te()},children:Object(i.jsx)($,{onClose:function(){return te()},option:M,setProviders:h,providers:O})})]})}));var G=h()(H())}}]);