(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[22],{545:function(e,t,a){"use strict";var o=a(1),i=a(5),n=(a(0),a(26)),r=a.n(n),l=a(62),c=a.n(l),d=a(124);t.a=c()(d.a)((function(e){var t,a=Object.assign({},e),n=a.classes,l=a.children,c=a.center,d=a.className,s=a.color,b=a.bold,u=a.normal,p=a.light,j=a.style,m=a.small,h=r()((t={},Object(i.a)(t,n.defaultFontStyle,!0),Object(i.a)(t,n.title,!0),Object(i.a)(t,d,!0),Object(i.a)(t,n[s],s),Object(i.a)(t,n.center,c),Object(i.a)(t,n.bold,b),Object(i.a)(t,n.normal,u),Object(i.a)(t,n.light,p),Object(i.a)(t,n.smaller,m),t));return Object(o.jsx)("div",{className:h,style:j,children:l})}))},546:function(e,t,a){"use strict";var o=a(1),i=a(4),n=a(82),r=(a(0),a(633)),l=a(641),c=a(506),d=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(c.a)(d)((function(e){var t=e.classes,a=e.onChange,c=e.value,d=e.endAdornment,s=e.placeholder,b=e.disabled,u=e.helperText,p=e.autoComplete,j=e.type,m=e.error,h=e.marginRight,O=e.minWidth,g=e.multiline,f=e.rows,x=e.autoFocus,v=Object(n.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(o.jsx)(r.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:h?40:0,minWidth:O?230:0},children:Object(o.jsx)(l.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},v),InputProps:{endAdornment:d?Object(o.jsx)("div",{className:t.endAdornment,children:d}):null},value:c,onChange:a,placeholder:s,disabled:b,autoComplete:p,type:j,helperText:u,error:m,multiline:g,rows:f,autoFocus:x})})}))},547:function(e,t,a){"use strict";var o=a(1),i=a(101),n=a(5),r=a(0),l=a(506),c=a(65),d=a(537),s=a(550),b=a(26),u=a.n(b),p=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.default,padding:0,outline:"none",borderRadius:10,display:"flex"},header:{padding:15,display:"flex",alignItems:"center",background:e.palette.background.paper},body:{padding:15},iconButton:{marginLeft:10},headerTitle:{marginLeft:30,marginRight:80},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"},backDrop:{backdropFilter:"blur(8px)"}}},j=a(569),m=a(61),h=a(545);t.a=Object(l.a)(p)((function(e){var t,a=e.classes,l=e.className,b=e.children,p=e.open,O=e.onClose,g=e.fullWidth,f=e.maxWidth,x=e.title,v=u()((t={},Object(n.a)(t,l,l),Object(n.a)(t,a[f],f),t)),k=Object(c.a)(),y=Object(d.a)(k.breakpoints.down("xs"));return Object(r.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(o){a.e(o)}finally{a.f()}}),100)}),[p]),Object(o.jsx)(j.a,{open:p,onClose:O,fullScreen:y||g,className:v,maxWidth:f,PaperProps:{classes:{root:a.root}},BackdropProps:{classes:{root:a.backDrop}},children:Object(o.jsxs)("div",{className:a.paper,children:[O&&Object(o.jsxs)("div",{className:a.header,children:[Object(o.jsx)(s.a,{className:a.iconButton,"aria-label":"Delete",onClick:O,children:Object(o.jsx)(m.a,{size:18,color:k.palette.text.contrasted,children:"Close"})}),x&&Object(o.jsx)(h.a,{normal:!0,className:a.headerTitle,children:x})]}),Object(o.jsx)("div",{className:a.body,children:b})]})})}))},646:function(e,t,a){"use strict";a.r(t);var o=a(41),i=a(1),n=a(4),r=a(56),l=a(20),c=a(0),d=a(632),s=a(2),b=a(10),u=(a(125),a(9),a(11)),p=a(37),j=a(32),m=a(17);a(533).a.styles;var h=c.forwardRef((function(e,t){var a=e.children,o=e.classes,i=e.className,n=e.color,r=void 0===n?"default":n,l=e.component,d=void 0===l?"div":l,j=e.disabled,m=void 0!==j&&j,h=e.disableElevation,O=void 0!==h&&h,g=e.disableFocusRipple,f=void 0!==g&&g,x=e.disableRipple,v=void 0!==x&&x,k=e.fullWidth,y=void 0!==k&&k,B=e.orientation,N=void 0===B?"horizontal":B,R=e.size,C=void 0===R?"medium":R,S=e.variant,T=void 0===S?"outlined":S,W=Object(b.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"]),w=Object(u.a)(o.grouped,o["grouped".concat(Object(p.a)(N))],o["grouped".concat(Object(p.a)(T))],o["grouped".concat(Object(p.a)(T)).concat(Object(p.a)(N))],o["grouped".concat(Object(p.a)(T)).concat("default"!==r?Object(p.a)(r):"")],m&&o.disabled);return c.createElement(d,Object(s.a)({role:"group",className:Object(u.a)(o.root,i,y&&o.fullWidth,O&&o.disableElevation,"contained"===T&&o.contained,"vertical"===N&&o.vertical),ref:t},W),c.Children.map(a,(function(e){return c.isValidElement(e)?c.cloneElement(e,{className:Object(u.a)(w,e.props.className),color:e.props.color||r,disabled:e.props.disabled||m,disableElevation:e.props.disableElevation||O,disableFocusRipple:f,disableRipple:v,fullWidth:y,size:e.props.size||C,variant:e.props.variant||T}):null})))})),O=Object(m.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},contained:{boxShadow:e.shadows[2]},disableElevation:{boxShadow:"none"},disabled:{},fullWidth:{width:"100%"},vertical:{flexDirection:"column"},grouped:{minWidth:40},groupedHorizontal:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}},groupedText:{},groupedTextHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextPrimary:{"&:not(:last-child)":{borderColor:Object(j.c)(e.palette.primary.main,.5)}},groupedTextSecondary:{"&:not(:last-child)":{borderColor:Object(j.c)(e.palette.secondary.main,.5)}},groupedOutlined:{},groupedOutlinedHorizontal:{"&:not(:first-child)":{marginLeft:-1},"&:not(:last-child)":{borderRightColor:"transparent"}},groupedOutlinedVertical:{"&:not(:first-child)":{marginTop:-1},"&:not(:last-child)":{borderBottomColor:"transparent"}},groupedOutlinedPrimary:{"&:hover":{borderColor:e.palette.primary.main}},groupedOutlinedSecondary:{"&:hover":{borderColor:e.palette.secondary.main}},groupedContained:{boxShadow:"none"},groupedContainedHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderRight:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderBottom:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedPrimary:{"&:not(:last-child)":{borderColor:e.palette.primary.dark}},groupedContainedSecondary:{"&:not(:last-child)":{borderColor:e.palette.secondary.dark}}}}),{name:"MuiButtonGroup"})(h),g=a(280),f=a(5),x=a(7),v=function(){var e;return e={root:{maxWidth:x.y,margin:"auto",minHeight:"90vh",padding:10}},Object(f.a)(e,"@media (max-width: ".concat(x.y,"px)"),{container:{width:"100%",margin:"auto"}}),Object(f.a)(e,"gridItem",{padding:20}),Object(f.a)(e,"card",{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"}),Object(f.a)(e,"description",{marginTop:20,marginBottom:50,flexGrow:1}),Object(f.a)(e,"wrapper",{padding:20}),Object(f.a)(e,"title",{marginBottom:20}),Object(f.a)(e,"label",{margin:"5px 0"}),Object(f.a)(e,"input",{marginTop:20,marginBottom:10,width:"100%"}),Object(f.a)(e,"form",{width:"100%",padding:30,paddingTop:0}),Object(f.a)(e,"formFooter",{marginTop:30}),e},k=a(42),y=a.n(k),B=a(53),N=a(76),R=a(63),C=a(122),S=a(187),T=a(545),W=a(75),w=a(186),z=a(547),_=a(546),E=a(81);function F(){var e=Object(o.a)(["\n    mutation deleteBlock($_id: ID!) {\n        deleteBlock(_id: $_id) {\n            _id\n            title\n        }\n    }\n"]);return F=function(){return e},e}function A(){var e=Object(o.a)(["\n    mutation editBlock($block: editBlockInput!) {\n        editBlock(block: $block) {\n            _id\n            title\n            description\n        }\n    }\n"]);return A=function(){return e},e}function D(){var e=Object(o.a)(["\n    query getAllBlocks {\n        getAllBlocks {\n            _id\n            title\n            description\n        }\n    }\n"]);return D=function(){return e},e}t.default=Object(m.a)(v)((function(e){var t=e.classes,a=Object(c.useState)(!1),o=Object(l.a)(a,2),s=o[0],b=o[1],u=Object(c.useState)([]),p=Object(l.a)(u,2),j=p[0],m=p[1],h=Object(c.useState)(!1),f=Object(l.a)(h,2),x=f[0],v=f[1],k=Object(c.useState)(""),y=Object(l.a)(k,2),F=y[0],A=y[1],D=Object(c.useState)(""),L=Object(l.a)(D,2),H=L[0],V=L[1],$=Object(c.useState)(""),G=Object(l.a)($,2),q=G[0],J=G[1],K=Object(c.useState)(""),Q=Object(l.a)(K,2),U=Q[0],X=Q[1],Y=Object(c.useState)(null),Z=Object(l.a)(Y,2),ee=Z[0],te=Z[1],ae=Object(c.useState)(!1),oe=Object(l.a)(ae,2),ie=oe[0],ne=oe[1],re=Object(B.c)(I),le=re.data,ce=re.loading,de=re.error,se=Object(B.b)(M),be=Object(l.a)(se,2),ue=be[0],pe=be[1],je=pe.data,me=pe.error,he=pe.loading,Oe=Object(B.b)(P),ge=Object(l.a)(Oe,2),fe=ge[0],xe=ge[1],ve=Object(g.a)().t;Object(c.useEffect)((function(){ce||!1!==s||b(!0)}),[ce,s]),Object(c.useEffect)((function(){(null===le||void 0===le?void 0:le.getAllBlocks)&&m(le.getAllBlocks)}),[le]),Object(c.useEffect)((function(){var e;(null===je||void 0===je||null===(e=je.editBlock)||void 0===e?void 0:e._id)&&(ke(),Object(N.a)(ve("contexttest.editBlock.success.editBlock"),{variant:"success"})),me&&te("contexttest.editBlock.errors.failEditBlock")}),[je,history,ve]),Object(c.useEffect)((function(){var e,t;if(null===xe||void 0===xe||null===(e=xe.data)||void 0===e||null===(t=e.deleteBlock)||void 0===t?void 0:t._id){Object(N.a)("Success",{variant:"success"});var a=xe.data.deleteBlock,o=j.findIndex((function(e){return e._id===a._id}));m([].concat(Object(r.a)(j.slice(0,o)),Object(r.a)(j.slice(o+1)))),ye()}}),[xe,history,ve]);var ke=function(){A(""),V(""),J(""),v(!1)},ye=function(){A(""),V(""),J(""),ne(!1)};return Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsxs)(d.a,{container:!0,className:t.container,children:[Object(i.jsx)(C.a,{errorMessage:de}),j.map((function(e){return Object(i.jsx)(d.a,{item:!0,lg:4,md:6,xs:12,className:t.gridItem,children:Object(i.jsxs)(S.a,{className:t.card,children:[Object(i.jsx)(T.a,{children:e.title}),Object(i.jsx)(W.a,{noWrap:!0,className:t.description,children:e.description}),Object(i.jsxs)(O,{children:[Object(i.jsx)(w.a,{noMargin:!0,size:"sm",loading:ce,children:ve("contexttest.block.see")}),Object(i.jsx)(w.a,{noMargin:!0,size:"sm",loading:ce,onClick:function(){return A((t=e)._id),V(t.title),J(t.description),void v(!0);var t},children:ve("contexttest.block.edit")}),Object(i.jsx)(w.a,{noMargin:!0,size:"sm",loading:ce,onClick:function(){return A((t=e)._id),V(t.title),J(t.description),void ne(!0);var t},children:ve("contexttest.block.delete")})]})]})},"block/".concat(e._id))}))]}),ce&&Object(i.jsx)(R.a,{absolute:!0}),Object(i.jsx)(z.a,{className:t.modal,open:x,onClose:ke,children:Object(i.jsx)(c.Fragment,{children:Object(i.jsxs)("div",{className:t.wrapper,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsx)(T.a,{normal:!0,centered:!0,children:ve("contexttest.editBlock.title")})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;if(H.length<2?(X("contexttest.editBlock.errors.invalidTitle"),t=!1):X(""),te(null),t){var a={id:F,title:H,description:q};ue({variables:{block:Object(n.a)({},a)}})}}(e)},children:[Object(i.jsxs)("div",{className:t.inputTitle,children:[Object(i.jsx)(E.a,{color:"label",className:t.label,children:ve("contexttest.editBlock.titleInputTitle")}),Object(i.jsx)(_.a,{autofocus:!0,value:H,onChange:function(e){return V(e.target.value)},placeholder:H,type:"text",helperText:ve(U),error:!!U})]}),Object(i.jsxs)("div",{className:t.inputDescription,children:[Object(i.jsx)(E.a,{bold:!0,className:t.label,children:ve("contexttest.editBlock.descriptionInputTitle")}),Object(i.jsx)(_.a,{value:q,onChange:function(e){return J(e.target.value)},placeholder:q,autoComplete:"description",type:"text"})]}),Object(i.jsx)(C.a,{errorMessage:de||ve(ee)}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(w.a,{noMargin:!0,fullWidth:!0,size:"lg",loading:he,type:"submit",children:ve("contexttest.editBlock.submit")})})]})]})})}),Object(i.jsx)(z.a,{className:t.modal,open:ie,onClose:ye,children:Object(i.jsx)(c.Fragment,{children:Object(i.jsxs)("div",{className:t.wrapper,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsx)(T.a,{normal:!0,centered:!0,children:ve("contexttest.deleteBlock.title")})}),Object(i.jsx)("div",{className:t.description,children:Object(i.jsx)(W.a,{noWrap:!0,centered:!0,children:"Voulez-vous vraiment supprimer ce block ?"})}),Object(i.jsx)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault(),""!==F&&(console.log("----- page delete block "),console.log(F),fe({variables:{_id:F}}))}(e)},children:Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(w.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",color:"error",loading:null===xe||void 0===xe?void 0:xe.loading,children:"Supprimer le block"})})})]})})})]})}));var I=y()(D()),M=y()(A()),P=y()(F())}}]);