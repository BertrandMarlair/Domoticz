(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[23],{545:function(e,t,n){"use strict";var a=n(1),c=n(5),i=(n(0),n(26)),l=n.n(i),o=n(62),r=n.n(o),s=n(124);t.a=r()(s.a)((function(e){var t,n=Object.assign({},e),i=n.classes,o=n.children,r=n.center,s=n.className,d=n.color,b=n.bold,u=n.normal,j=n.light,m=n.style,p=n.small,O=l()((t={},Object(c.a)(t,i.defaultFontStyle,!0),Object(c.a)(t,i.title,!0),Object(c.a)(t,s,!0),Object(c.a)(t,i[d],d),Object(c.a)(t,i.center,r),Object(c.a)(t,i.bold,b),Object(c.a)(t,i.normal,u),Object(c.a)(t,i.light,j),Object(c.a)(t,i.smaller,p),t));return Object(a.jsx)("div",{className:O,style:m,children:o})}))},546:function(e,t,n){"use strict";var a=n(1),c=n(4),i=n(82),l=(n(0),n(630)),o=n(640),r=n(506),s=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(r.a)(s)((function(e){var t=e.classes,n=e.onChange,r=e.value,s=e.endAdornment,d=e.placeholder,b=e.disabled,u=e.helperText,j=e.autoComplete,m=e.type,p=e.error,O=e.marginRight,h=e.minWidth,x=e.multiline,f=e.rows,g=e.autoFocus,v=Object(i.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(a.jsx)(l.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:O?40:0,minWidth:h?230:0},children:Object(a.jsx)(o.a,{variant:"outlined",inputProps:Object(c.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},v),InputProps:{endAdornment:s?Object(a.jsx)("div",{className:t.endAdornment,children:s}):null},value:r,onChange:n,placeholder:d,disabled:b,autoComplete:j,type:m,helperText:u,error:p,multiline:x,rows:f,autoFocus:g})})}))},548:function(e,t,n){"use strict";var a=n(1),c=n(101),i=n(5),l=n(0),o=n(506),r=n(65),s=n(537),d=n(550),b=n(26),u=n.n(b),j=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.default,padding:0,outline:"none",borderRadius:10,display:"flex"},header:{padding:15,display:"flex",alignItems:"center",background:e.palette.background.paper},body:{padding:15},iconButton:{marginLeft:10},headerTitle:{marginLeft:30,marginRight:80},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"},backDrop:{backdropFilter:"blur(8px)"}}},m=n(567),p=n(61),O=n(545);t.a=Object(o.a)(j)((function(e){var t,n=e.classes,o=e.className,b=e.children,j=e.open,h=e.onClose,x=e.fullWidth,f=e.maxWidth,g=e.title,v=u()((t={},Object(i.a)(t,o,o),Object(i.a)(t,n[f],f),t)),k=Object(r.a)(),N=Object(s.a)(k.breakpoints.down("xs"));return Object(l.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),n=Object(c.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.removeAttribute("tabindex")}}catch(a){n.e(a)}finally{n.f()}}),100)}),[j]),Object(a.jsx)(m.a,{open:j,onClose:h,fullScreen:N||x,className:v,maxWidth:f,PaperProps:{classes:{root:n.root}},BackdropProps:{classes:{root:n.backDrop}},children:Object(a.jsxs)("div",{className:n.paper,children:[h&&Object(a.jsxs)("div",{className:n.header,children:[Object(a.jsx)(d.a,{className:n.iconButton,"aria-label":"Delete",onClick:h,children:Object(a.jsx)(p.a,{size:18,color:k.palette.text.contrasted,children:"Close"})}),g&&Object(a.jsx)(O.a,{normal:!0,className:n.headerTitle,children:g})]}),Object(a.jsx)("div",{className:n.body,children:b})]})})}))},661:function(e,t,n){"use strict";n.r(t);var a=n(41),c=n(1),i=n(4),l=n(56),o=n(20),r=n(0),s=n(559),d=n(637),b=n(17),u=n(280),j=n(5),m=n(7),p=function(){var e;return e={root:{maxWidth:m.y,margin:"auto",minHeight:"90vh",padding:10}},Object(j.a)(e,"@media (max-width: ".concat(m.y,"px)"),{container:{width:"100%",margin:"auto"}}),Object(j.a)(e,"gridItem",{padding:20}),Object(j.a)(e,"card",{maxWidth:400,minWidth:245,padding:30,flexGrow:1,display:"flex",flexDirection:"column",margin:"10px auto",height:"100%"}),Object(j.a)(e,"description",{marginTop:20,marginBottom:50,flexGrow:1}),Object(j.a)(e,"wrapper",{padding:20}),Object(j.a)(e,"title",{marginBottom:20}),Object(j.a)(e,"label",{margin:"5px 0"}),Object(j.a)(e,"input",{marginTop:20,marginBottom:10,width:"100%"}),Object(j.a)(e,"form",{width:"100%",padding:30,paddingTop:0}),Object(j.a)(e,"formFooter",{marginTop:30}),e},O=n(42),h=n.n(O),x=n(53),f=n(76),g=n(63),v=n(122),k=n(187),N=n(545),B=n(75),y=n(186),S=n(548),W=n(546),w=n(81);function C(){var e=Object(a.a)(["\n    mutation deleteBlock($_id: ID!) {\n        deleteBlock(_id: $_id) {\n            _id\n            title\n        }\n    }\n"]);return C=function(){return e},e}function _(){var e=Object(a.a)(["\n    mutation editBlock($block: editBlockInput!) {\n        editBlock(block: $block) {\n            _id\n            title\n            description\n        }\n    }\n"]);return _=function(){return e},e}function T(){var e=Object(a.a)(["\n    query getAllBlocks {\n        getAllBlocks {\n            _id\n            title\n            description\n        }\n    }\n"]);return T=function(){return e},e}t.default=Object(b.a)(p)((function(e){var t=e.classes,n=Object(r.useState)(!1),a=Object(o.a)(n,2),b=a[0],j=a[1],m=Object(r.useState)([]),p=Object(o.a)(m,2),O=p[0],h=p[1],C=Object(r.useState)(!1),_=Object(o.a)(C,2),T=_[0],I=_[1],R=Object(r.useState)(""),D=Object(o.a)(R,2),M=D[0],E=D[1],P=Object(r.useState)(""),$=Object(o.a)(P,2),q=$[0],G=$[1],H=Object(r.useState)(""),J=Object(o.a)(H,2),L=J[0],V=J[1],K=Object(r.useState)(""),Q=Object(o.a)(K,2),U=Q[0],X=Q[1],Y=Object(r.useState)(null),Z=Object(o.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(r.useState)(!1),ae=Object(o.a)(ne,2),ce=ae[0],ie=ae[1],le=Object(x.c)(A),oe=le.data,re=le.loading,se=le.error,de=Object(x.b)(F),be=Object(o.a)(de,2),ue=be[0],je=be[1],me=je.data,pe=je.error,Oe=je.loading,he=Object(x.b)(z),xe=Object(o.a)(he,2),fe=xe[0],ge=xe[1],ve=Object(u.a)().t;Object(r.useEffect)((function(){re||!1!==b||j(!0)}),[re,b]),Object(r.useEffect)((function(){(null===oe||void 0===oe?void 0:oe.getAllBlocks)&&h(oe.getAllBlocks)}),[oe]),Object(r.useEffect)((function(){var e;(null===me||void 0===me||null===(e=me.editBlock)||void 0===e?void 0:e._id)&&(ke(),Object(f.a)(ve("contexttest.editBlock.success.editBlock"),{variant:"success"})),pe&&te("contexttest.editBlock.errors.failEditBlock")}),[me,history,ve]),Object(r.useEffect)((function(){var e,t;if(null===ge||void 0===ge||null===(e=ge.data)||void 0===e||null===(t=e.deleteBlock)||void 0===t?void 0:t._id){Object(f.a)("Success",{variant:"success"});var n=ge.data.deleteBlock,a=O.findIndex((function(e){return e._id===n._id}));h([].concat(Object(l.a)(O.slice(0,a)),Object(l.a)(O.slice(a+1)))),Ne()}}),[ge,history,ve]);var ke=function(){E(""),G(""),V(""),I(!1)},Ne=function(){E(""),G(""),V(""),ie(!1)};return Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsxs)(s.a,{container:!0,className:t.container,children:[Object(c.jsx)(v.a,{errorMessage:se}),O.map((function(e){return Object(c.jsx)(s.a,{item:!0,lg:4,md:6,xs:12,className:t.gridItem,children:Object(c.jsxs)(k.a,{className:t.card,children:[Object(c.jsx)(N.a,{children:e.title}),Object(c.jsx)(B.a,{noWrap:!0,className:t.description,children:e.description}),Object(c.jsxs)(d.a,{children:[Object(c.jsx)(y.a,{noMargin:!0,size:"sm",loading:re,children:ve("contexttest.block.see")}),Object(c.jsx)(y.a,{noMargin:!0,size:"sm",loading:re,onClick:function(){return E((t=e)._id),G(t.title),V(t.description),void I(!0);var t},children:ve("contexttest.block.edit")}),Object(c.jsx)(y.a,{noMargin:!0,size:"sm",loading:re,onClick:function(){return E((t=e)._id),G(t.title),V(t.description),void ie(!0);var t},children:ve("contexttest.block.delete")})]})]})},"block/".concat(e._id))}))]}),re&&Object(c.jsx)(g.a,{absolute:!0}),Object(c.jsx)(S.a,{className:t.modal,open:T,onClose:ke,children:Object(c.jsx)(r.Fragment,{children:Object(c.jsxs)("div",{className:t.wrapper,children:[Object(c.jsx)("div",{className:t.title,children:Object(c.jsx)(N.a,{normal:!0,centered:!0,children:ve("contexttest.editBlock.title")})}),Object(c.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;if(q.length<2?(X("contexttest.editBlock.errors.invalidTitle"),t=!1):X(""),te(null),t){var n={id:M,title:q,description:L};ue({variables:{block:Object(i.a)({},n)}})}}(e)},children:[Object(c.jsxs)("div",{className:t.inputTitle,children:[Object(c.jsx)(w.a,{color:"label",className:t.label,children:ve("contexttest.editBlock.titleInputTitle")}),Object(c.jsx)(W.a,{autofocus:!0,value:q,onChange:function(e){return G(e.target.value)},placeholder:q,type:"text",helperText:ve(U),error:!!U})]}),Object(c.jsxs)("div",{className:t.inputDescription,children:[Object(c.jsx)(w.a,{bold:!0,className:t.label,children:ve("contexttest.editBlock.descriptionInputTitle")}),Object(c.jsx)(W.a,{value:L,onChange:function(e){return V(e.target.value)},placeholder:L,autoComplete:"description",type:"text"})]}),Object(c.jsx)(v.a,{errorMessage:se||ve(ee)}),Object(c.jsx)("div",{className:t.formFooter,children:Object(c.jsx)(y.a,{noMargin:!0,fullWidth:!0,size:"lg",loading:Oe,type:"submit",children:ve("contexttest.editBlock.submit")})})]})]})})}),Object(c.jsx)(S.a,{className:t.modal,open:ce,onClose:Ne,children:Object(c.jsx)(r.Fragment,{children:Object(c.jsxs)("div",{className:t.wrapper,children:[Object(c.jsx)("div",{className:t.title,children:Object(c.jsx)(N.a,{normal:!0,centered:!0,children:ve("contexttest.deleteBlock.title")})}),Object(c.jsx)("div",{className:t.description,children:Object(c.jsx)(B.a,{noWrap:!0,centered:!0,children:"Voulez-vous vraiment supprimer ce block ?"})}),Object(c.jsx)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault(),""!==M&&(console.log("----- page delete block "),console.log(M),fe({variables:{_id:M}}))}(e)},children:Object(c.jsx)("div",{className:t.formFooter,children:Object(c.jsx)(y.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",color:"error",loading:null===ge||void 0===ge?void 0:ge.loading,children:"Supprimer le block"})})})]})})})]})}));var A=h()(T()),F=h()(_()),z=h()(C())}}]);