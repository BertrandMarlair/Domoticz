(this.webpackJsonpdomoticz_client=this.webpackJsonpdomoticz_client||[]).push([[5],{545:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(26)),c=a.n(r),s=a(62),o=a.n(s),l=a(124);t.a=o()(l.a)((function(e){var t,a=Object.assign({},e),r=a.classes,s=a.children,o=a.center,l=a.className,d=a.color,u=a.bold,b=a.normal,j=a.light,m=a.style,p=a.small,f=c()((t={},Object(i.a)(t,r.defaultFontStyle,!0),Object(i.a)(t,r.title,!0),Object(i.a)(t,l,!0),Object(i.a)(t,r[d],d),Object(i.a)(t,r.center,o),Object(i.a)(t,r.bold,u),Object(i.a)(t,r.normal,b),Object(i.a)(t,r.light,j),Object(i.a)(t,r.smaller,p),t));return Object(n.jsx)("div",{className:f,style:m,children:s})}))},546:function(e,t,a){"use strict";var n=a(1),i=a(4),r=a(82),c=(a(0),a(633)),s=a(641),o=a(506),l=function(e){return{root:{"& fieldset":{borderRadius:6},"& input + fieldset":{borderColor:"hsl(0,0%,80%)",borderWidth:1},"& input:hover + fieldset":{border:"1px solid ".concat(e.palette.grey[500]," !important")},"& input:focus + fieldset":{border:"2px solid ".concat(e.palette.link.main," !important")}},input:{padding:9.5,borderRadius:10},endAdornment:{minWidth:24,display:"flex"},marginRight:{marginRight:40}}};t.a=Object(o.a)(l)((function(e){var t=e.classes,a=e.onChange,o=e.value,l=e.endAdornment,d=e.placeholder,u=e.disabled,b=e.helperText,j=e.autoComplete,m=e.type,p=e.error,f=e.marginRight,O=e.minWidth,h=e.multiline,v=e.rows,g=e.autoFocus,x=Object(r.a)(e,["classes","onChange","value","endAdornment","placeholder","disabled","helperText","autoComplete","type","error","marginRight","minWidth","multiline","rows","autoFocus"]);return Object(n.jsx)(c.a,{className:t.root,fullWidth:!0,variant:"outlined",style:{marginRight:f?40:0,minWidth:O?230:0},children:Object(n.jsx)(s.a,{variant:"outlined",inputProps:Object(i.a)({style:{padding:"9.5px 15px",fontWeight:300,minHeight:35}},x),InputProps:{endAdornment:l?Object(n.jsx)("div",{className:t.endAdornment,children:l}):null},value:o,onChange:a,placeholder:d,disabled:u,autoComplete:j,type:m,helperText:b,error:p,multiline:h,rows:v,autoFocus:g})})}))},547:function(e,t,a){"use strict";var n=a(1),i=a(101),r=a(5),c=a(0),s=a(506),o=a(65),l=a(537),d=a(550),u=a(26),b=a.n(u),j=function(e){return{root:{boxShadow:e.palette.boxShadow.main,background:e.palette.background.default,padding:0,outline:"none",borderRadius:10,display:"flex"},header:{padding:15,display:"flex",alignItems:"center",background:e.palette.background.paper},body:{padding:15},iconButton:{marginLeft:10},headerTitle:{marginLeft:30,marginRight:80},maxWidth:{maxWidth:0},noScroll:{overflow:"initial !important"},backDrop:{backdropFilter:"blur(8px)"}}},m=a(569),p=a(61),f=a(545);t.a=Object(s.a)(j)((function(e){var t,a=e.classes,s=e.className,u=e.children,j=e.open,O=e.onClose,h=e.fullWidth,v=e.maxWidth,g=e.title,x=b()((t={},Object(r.a)(t,s,s),Object(r.a)(t,a[v],v),t)),w=Object(o.a)(),y=Object(l.a)(w.breakpoints.down("xs"));return Object(c.useEffect)((function(){setTimeout((function(){var e,t=document.querySelectorAll('div[tabindex*="-1"]'),a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){e.value.removeAttribute("tabindex")}}catch(n){a.e(n)}finally{a.f()}}),100)}),[j]),Object(n.jsx)(m.a,{open:j,onClose:O,fullScreen:y||h,className:x,maxWidth:v,PaperProps:{classes:{root:a.root}},BackdropProps:{classes:{root:a.backDrop}},children:Object(n.jsxs)("div",{className:a.paper,children:[O&&Object(n.jsxs)("div",{className:a.header,children:[Object(n.jsx)(d.a,{className:a.iconButton,"aria-label":"Delete",onClick:O,children:Object(n.jsx)(p.a,{size:18,color:w.palette.text.contrasted,children:"Close"})}),g&&Object(n.jsx)(f.a,{normal:!0,className:a.headerTitle,children:g})]}),Object(n.jsx)("div",{className:a.body,children:u})]})})}))},548:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(5),i=a(4),r=a(7);t.a=function(){return{drawer:{transition:"0.2s",width:"100%",height:"100%"},drawerSmall:{minHeight:"100%"},logo:{height:"100%"},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1},icon:{marginRight:20},header:Object(i.a)({margin:10,padding:10},r.q),profile:{margin:0}}};var c={wrapperModal:{padding:40,minWidth:500},title:{marginBottom:20},description:{marginBottom:30},form:{width:"100%",paddingTop:0},label:{margin:"5px 0"},input:{marginTop:20,marginBottom:10,width:"100%"},formFooter:{marginTop:30}},s=Object(n.a)({root:{margin:"auto",minHeight:"90vh",padding:10},wrapper:{display:"flex"},icon:{marginRight:20},main:{width:"100%",height:"100%",margin:10},navBar:{width:400,height:"100%",margin:10,paddingRight:20},navItem:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,height:60}},"@media (max-width: 1023px)",{navBar:{width:300,margin:5,paddingRight:0},icon:{marginRight:10},navItem:{paddingRight:0,paddingTop:5,paddingBottom:5,height:60}}),o={header:{paddingLeft:16,paddingRight:16,paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"space-between",alignItems:"center"},date:{paddingLeft:5},wrapper:{display:"flex",flexWrap:"wrap",alignItems:"stretch"},item:{flexGrow:1}},l={wrapperBtn:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"stretch",margin:14,"& div":{flexGrow:1,padding:2,"& button":{margin:"0 !important",width:"100%"}}}}},549:function(e,t,a){"use strict";var n=a(1),i=a(5),r=(a(0),a(506)),c=function(){return{root:{width:"100%",display:"flex"},button:{}}},s=a(26),o=a.n(s),l=a(186),d=a(61),u=a(27);t.a=Object(r.a)(c)((function(e){var t,a=e.classes,r=e.className,c=Object(u.g)(),s=o()((t={},Object(i.a)(t,a.button,!0),Object(i.a)(t,r,r),t));return Object(n.jsx)("div",{className:a.root,children:Object(n.jsxs)(l.a,{className:s,color:"transparent",onClick:function(){return c.goBack()},children:[Object(n.jsx)(d.a,{children:"Left"}),"Back"]})})}))},561:function(e,t,a){"use strict";var n=a(1),i=a(5),r=a(20),c=a(0),s=a(65),o=a(17),l=a(113),d=a.n(l),u=a(26),b=a.n(u),j=a(15),m=a(75),p=a(280);t.a=Object(o.a)((function(e){return{late:{color:e.palette.error.main}}}))((function(e){var t,a=e.classes,o=e.date,l=e.children,u=e.fromNow,f=e.format,O=e.startOf,h=e.endOf,v=e.condition,g=e.refresh,x=e.bold,w=e.small,y=e.margin,N=e.className,S=Object(c.useState)(0),C=Object(r.a)(S,2),_=C[0],T=C[1],W=Object(s.a)(),M=Object(p.a)().t;Object(c.useEffect)((function(){g&&o<j.i&&setTimeout((function(){T(_+1)}),1e4)}),[T,_,g,o]);var $=function(){return!!v||(new Date(d()(l)._d).getTime()<Date.now()||new Date(d()(o)._d).getTime()<Date.now()?W.palette.error.main:new Date(d()(o)._d).getTime()<Date.now()+2*j.h?W.palette.warning.main:W.palette.success.main)},k=b()((t={},Object(i.a)(t,a.date,!0),Object(i.a)(t,a.late,(!0===v||!1===v)&&$()===W.palette.error.main),Object(i.a)(t,a.warning,(!0===v||!1===v)&&$()===W.palette.warning.main),Object(i.a)(t,N,N),t));return Object(n.jsx)("span",{className:k,children:Object(n.jsx)(m.a,{bold:!!x,small:!!w,margin:!!y,className:N,children:l||o?f&&f.length>0?d()(l||o).format(f):O&&O.length>0?d()(l||o).startOf(O).fromNow():h&&h.length>0?d()(l||o).endOf(h).fromNow():u?d()(l||o).fromNow():d()(l||o).format("DD MMM"):M("error.date.invalid")})})}))},580:function(e,t,a){"use strict";var n=a(41),i=a(1),r=a(20),c=a(0),s=a(42),o=a.n(s),l=a(4),d=a(548),u=function(){return Object(l.a)({},d.e)},b=a(280),j=a(506),m=a(53),p=a(546),f=a(122),O=a(76),h=a(186),v=a(545),g=a(81),x=a(27),w=a(75);function y(){var e=Object(n.a)(["\n    mutation deleteUser($_id: ID!, $name: String!) {\n        deleteUser(_id: $_id, name: $name) {\n            _id\n            name\n        }\n    }\n"]);return y=function(){return e},e}t.a=Object(j.a)(u)((function(e){var t=e.classes,a=e.account,n=Object(c.useState)(""),s=Object(r.a)(n,2),o=s[0],l=s[1],d=Object(c.useState)(),u=Object(r.a)(d,2),j=u[0],y=u[1],S=Object(c.useState)(),C=Object(r.a)(S,2),_=C[0],T=C[1],W=Object(c.useState)(null),M=Object(r.a)(W,2),$=M[0],k=M[1],D=Object(x.g)(),R=Object(b.a)().t,A=Object(m.b)(N),B=Object(r.a)(A,2),I=B[0],L=B[1],U=L.data,P=L.loading,z=L.error;Object(c.useEffect)((function(){"user"===a.type?l("de l'utilisateur"):"device"===a.type&&l("du device"),(null===a||void 0===a?void 0:a._id)&&y(a._id)})),Object(c.useEffect)((function(){var e;(null===U||void 0===U||null===(e=U.deleteUser)||void 0===e?void 0:e._id)&&(Object(O.a)("Success",{variant:"success"}),D.push("/admin/accounts"))}),[U,D,R]);return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsxs)(v.a,{normal:!0,centered:!0,children:["Suppression ",o," ",a.name]})}),Object(i.jsx)("div",{className:t.description,children:Object(i.jsx)(w.a,{noWrap:!0,centered:!0,children:"Attention ! Cette action est irr\xe9versible. Voulez-vous vraiment supprimer cet utilisateur ?"})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;_!==a.name?(k("Le nom de l'utilisateur est incorrect."),t=!1):k(""),t&&I({variables:{_id:j,name:_}})}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(g.a,{color:"label",className:t.label,children:"Confirmer le nom de l'utilisateur \xe0 supprimer"}),Object(i.jsx)(p.a,{autoFocus:!0,onChange:function(e){return T(e.target.value)},placeholder:"Entrer le nom",type:"text",helperText:R($),error:!!$})]}),Object(i.jsx)(f.a,{errorMessage:z}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(h.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:P,children:"Supprimer l'utilisateur"})})]})]})}));var N=o()(y())},581:function(e,t,a){"use strict";var n=a(41),i=a(1),r=a(20),c=a(0),s=a(42),o=a.n(s),l=a(4),d=a(548),u=function(){return Object(l.a)({},d.e)},b=a(280),j=a(506),m=a(53),p=a(546),f=a(122),O=a(76),h=a(186),v=a(545),g=a(81),x=a(27),w=a(75);function y(){var e=Object(n.a)(["\n    mutation resetUserPwd($_id: ID!, $password: String!, $passwordConfirmation: String!) {\n        resetUserPwd(_id: $_id, password: $password, passwordConfirmation: $passwordConfirmation) {\n            _id\n            name\n            type\n            active\n            permission\n            basic {\n                verified\n                lastLogin\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return y=function(){return e},e}t.a=Object(j.a)(u)((function(e){var t=e.classes,a=e.account,n=e.onClose,s=Object(c.useState)(),o=Object(r.a)(s,2),l=o[0],d=o[1],u=Object(c.useState)(""),j=Object(r.a)(u,2),y=j[0],S=j[1],C=Object(c.useState)(null),_=Object(r.a)(C,2),T=_[0],W=_[1],M=Object(c.useState)(""),$=Object(r.a)(M,2),k=$[0],D=$[1],R=Object(c.useState)(null),A=Object(r.a)(R,2),B=A[0],I=A[1],L=Object(x.g)(),U=Object(b.a)().t,P=Object(m.b)(N),z=Object(r.a)(P,2),E=z[0],F=z[1],V=F.data,G=F.loading,H=F.error;Object(c.useEffect)((function(){(null===a||void 0===a?void 0:a._id)&&d(a._id)})),Object(c.useEffect)((function(){var e;console.log("---data"),console.log(V),(null===V||void 0===V||null===(e=V.resetUserPwd)||void 0===e?void 0:e._id)&&(Object(O.a)("Success",{variant:"success"}),n())}),[V,L,U]);return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsxs)(v.a,{normal:!0,centered:!0,children:["Modification du mot de passe de ",a.name]})}),Object(i.jsx)("div",{className:t.description,children:Object(i.jsx)(w.a,{noWrap:!0,centered:!0,children:"Voulez-vous vraiment modifier le mot de passe ?"})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;y.length<5?(W("connect.register.errors.invalidPassword"),t=!1):W(""),k.length<5?(I("connect.register.errors.invalidConfirmPasswordShort"),t=!1):I(""),k!==y?(I("connect.register.errors.invalidConfirmPassword"),t=!1):I(""),t&&E({variables:{_id:l,password:y,passwordConfirmation:k}})}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(g.a,{color:"label",className:t.label,children:"Nouveau mot de passe"}),Object(i.jsx)(p.a,{value:y,onChange:function(e){return S(e.target.value)},placeholder:U("connect.signin.passwordInputLabel"),autoComplete:"current-password",type:"password",helperText:U(T),error:!!T})]}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(g.a,{color:"label",className:t.label,children:"Confirmation du nouveau mot de passe"}),Object(i.jsx)(p.a,{value:k,onChange:function(e){return D(e.target.value)},placeholder:U("connect.signin.confirmPasswordInputLabel"),autoComplete:"current-password",type:"password",helperText:U(B),error:!!B})]}),Object(i.jsx)(f.a,{errorMessage:H}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(h.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:G,children:"Modifier l'utilisateur"})})]})]})}));var N=o()(y())},582:function(e,t,a){"use strict";var n=a(41),i=a(1),r=a(5),c=a(4),s=a(20),o=a(0),l=a(42),d=a.n(l),u=a(548),b=function(){return Object(c.a)({wrapperStatus:{display:"flex","& Label":{marginLeft:0,marginRight:10}}},u.e)},j=a(280),m=a(506),p=a(53),f=a(546),O=a(122),h=a(76),v=a(186),g=a(545),x=a(81),w=a(27),y=a(75),N=a(591),S=a(592),C=a(594);function _(){var e=Object(n.a)(["\n    mutation editUser($_id: ID!, $name: String!, $active: Boolean!, $verified: Boolean!) {\n        editUser(_id: $_id, name: $name, active: $active, verified: $verified) {\n            _id\n            name\n            type\n            active\n            permission\n            basic {\n                verified\n                lastLogin\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return _=function(){return e},e}t.a=Object(m.a)(b)((function(e){var t=e.classes,a=e.account,n=e.onClose,l=e.setAccount,d=Object(o.useState)(""),u=Object(s.a)(d,2),b=u[0],m=u[1],_=Object(o.useState)(),W=Object(s.a)(_,2),M=W[0],$=W[1],k=Object(o.useState)(a.name),D=Object(s.a)(k,2),R=D[0],A=D[1],B=Object(o.useState)(null),I=Object(s.a)(B,2),L=I[0],U=I[1],P=Object(w.g)(),z=Object(o.useState)({active:a.active,verified:a.basic.verified}),E=Object(s.a)(z,2),F=E[0],V=E[1],G=Object(j.a)().t,H=Object(p.b)(T),J=Object(s.a)(H,2),q=J[0],K=J[1],Q=K.data,X=K.loading,Y=K.error;Object(o.useEffect)((function(){"user"===a.type?m("de l'utilisateur"):"device"===a.type&&m("du device"),(null===a||void 0===a?void 0:a._id)&&$(a._id)})),Object(o.useEffect)((function(){var e;(null===Q||void 0===Q||null===(e=Q.editUser)||void 0===e?void 0:e._id)&&(Object(h.a)("Success",{variant:"success"}),l(Q.editUser),n())}),[Q,P,G]);var Z=function(e){V(Object(c.a)(Object(c.a)({},F),{},Object(r.a)({},e.target.name,e.target.checked)))};return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsxs)(g.a,{normal:!0,centered:!0,children:["Modification ",b," ",a.name]})}),Object(i.jsx)("div",{className:t.description,children:Object(i.jsx)(y.a,{className:t.text,noWrap:!0,centered:!0,children:"Attention ! Cette action est irr\xe9versible. Voulez-vous vraiment supprimer cet utilisateur ?"})}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;R.length<2?(U("Le nom doit faire plus de deux caract\xe8res"),t=!1):U(""),t&&q({variables:{_id:M,name:R,active:F.active,verified:F.verified}})}(e)},children:[Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(x.a,{color:"label",className:t.label,children:"Nom"}),Object(i.jsx)(f.a,{autoFocus:!0,value:R,onChange:function(e){return A(e.target.value)},placeholder:R,type:"text",helperText:G(L),error:!!L})]}),Object(i.jsxs)("div",{className:t.input,children:[Object(i.jsx)(x.a,{color:"label",className:t.label,children:"Status"}),Object(i.jsxs)(N.a,{className:t.wrapperStatus,row:!0,children:[Object(i.jsx)(S.a,{control:Object(i.jsx)(C.a,{checked:F.active,onChange:Z,name:"active"}),label:"Active"}),Object(i.jsx)(S.a,{control:Object(i.jsx)(C.a,{checked:F.verified,onChange:Z,name:"verified"}),label:"Verifi\xe9"})]})]}),Object(i.jsx)(O.a,{errorMessage:Y}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(v.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:X,children:"Modifier"})})]})]})}));var T=d()(_())},583:function(e,t,a){"use strict";var n=a(41),i=a(1),r=a(5),c=a(4),s=a(20),o=a(0),l=a.n(o),d=a(42),u=a.n(d),b=a(548),j=function(){return Object(c.a)({},b.e)},m=a(280),p=a(506),f=a(53),O=a(122),h=a(76),v=a(186),g=a(545),x=a(27),w=a(75),y=a(591),N=a(592),S=a(603);function C(){var e=Object(n.a)(["\n    mutation accountTypeUpdate($_id: ID!, $type: TypeEnum!) {\n        accountTypeUpdate(_id: $_id, type: $type) {\n            _id\n            name\n            type\n            active\n            permission\n            basic {\n                verified\n                lastLogin\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return C=function(){return e},e}t.a=Object(p.a)(j)((function(e){var t=e.classes,a=e.account,n=e.onClose,d=Object(o.useState)(),u=Object(s.a)(d,2),b=u[0],j=u[1],p=l.a.useState({confirmed:!1}),C=Object(s.a)(p,2),T=C[0],W=C[1],M=Object(o.useState)(""),$=Object(s.a)(M,2),k=$[0],D=$[1],R=Object(o.useState)(""),A=Object(s.a)(R,2),B=A[0],I=A[1],L=Object(x.g)(),U=Object(m.a)().t,P=Object(f.b)(_),z=Object(s.a)(P,2),E=z[0],F=z[1],V=F.data,G=F.loading,H=F.error;Object(o.useEffect)((function(){(null===a||void 0===a?void 0:a._id)&&(j(a._id),"device"===a.type?I("user"):"user"===a.type&&I("device"))})),Object(o.useEffect)((function(){var e;console.log("---data"),console.log(V),(null===V||void 0===V||null===(e=V.accountTypeUpdate)||void 0===e?void 0:e._id)&&(Object(h.a)("Success",{variant:"success"}),n(),L.push("/admin/".concat(V.accountTypeUpdate.type,"/").concat(V.accountTypeUpdate._id)))}),[V,L,U]);return Object(i.jsxs)("div",{className:t.wrapperModal,children:[Object(i.jsx)("div",{className:t.title,children:Object(i.jsxs)(g.a,{normal:!0,centered:!0,children:["Modification du type de ",Object(i.jsx)("strong",{children:a.name})]})}),Object(i.jsxs)("div",{className:t.description,children:[Object(i.jsxs)(w.a,{noWrap:!0,centered:!0,children:['Ce compte est actuellement de type "',a.type,'".']}),Object(i.jsxs)(w.a,{noWrap:!0,centered:!0,children:['Voulez-vous vraiment le modifier en "',B,'"?']})]}),Object(i.jsxs)("form",{className:t.form,onSubmit:function(e){return function(e){e.preventDefault();var t=!0;!1===T.confirmed?(D("Vous devez confirmer l'action"),t=!1):D(""),console.log("-----test"),console.log(B),t&&E({variables:{_id:b,type:B}})}(e)},children:[Object(i.jsx)("div",{className:t.input,children:Object(i.jsx)(y.a,{"aria-label":"position",row:!0,children:Object(i.jsx)(N.a,{control:Object(i.jsx)(S.a,{checked:T.confirmed,onChange:function(e){W(Object(c.a)(Object(c.a)({},T),{},Object(r.a)({},e.target.name,e.target.checked)))},name:"confirmed"}),label:"Je confirme le changement de type",labelPlacement:"end"})})}),Object(i.jsx)(O.a,{errorMessage:H||k}),Object(i.jsx)("div",{className:t.formFooter,children:Object(i.jsx)(v.a,{noMargin:!0,fullWidth:!0,size:"lg",type:"submit",loading:G,children:"Modifier le type"})})]})]})}));var _=u()(C())}}]);